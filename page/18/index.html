<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/18/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-linux_command/restorecon" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/restorecon/" class="article-date">
  <time datetime="2019-05-15T13:24:15.107Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="restorecon"><a href="#restorecon" class="headerlink" title="restorecon"></a>restorecon</h1><p>恢复文件的安全上下文</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>restorecon命令</strong> 用来恢复SELinux文件属性即恢复文件的安全上下文。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restorecon [-iFnrRv] [-e excludedir ] [-o filename ] [-f filename | pathname...]</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-i：忽略不存在的文件。</span><br><span class="line">-f：infilename 文件 infilename 中记录要处理的文件。</span><br><span class="line">-e：directory 排除目录。</span><br><span class="line">-R/-r：递归处理目录。</span><br><span class="line">-n：不改变文件标签。</span><br><span class="line">-o/outfilename：保存文件列表到 outfilename，在文件不正确情况下。</span><br><span class="line">-v：将过程显示到屏幕上。</span><br><span class="line">-F：强制恢复文件安全语境。</span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>假设CentOS安装了apache，网页默认的主目录是<code>/var/www/html</code>，我们经常遇到这样的问题，在其他目录中创建了一个网页文件，然后用mv移动到网页默认目录<code>/var/www/html</code>中，但是在浏览器中却打不开这个文件，这很可能是因为这个文件的SELinux配置信息是继承原来那个目录的，与<code>/var/www/html</code>目录不同，使用mv移动的时候，这个SELinux配置信息也一起移动过来了，从而导致无法打开页面，具体请看下面的实例：</p>
<p><pre style="color: rgb(0, 0, 0); font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">/<em>使用CentOS举例,如果默认没有安装apache，确保网络连接，使用下面的命令安装</em>/<br>[<a href="mailto:root@jsdig.com" target="_blank" rel="noopener">root@jsdig.com</a> ~]# yum install httpd<br> /<em>我们在root的家目录新建一个html文件</em>/<br>[<a href="mailto:root@jsdig.com" target="_blank" rel="noopener">root@jsdig.com</a> ~]# pwd<br>/root</pre></p>
<p>[<a href="mailto:root@jsdig.com" target="_blank" rel="noopener">root@jsdig.com</a> ~]# vi index.html</p>
<p>/<em>随便输入一段文字，保存退出</em>/<br>welcome to <a href="http://www.jsdig.com" target="_blank" rel="noopener">www.jsdig.com</a></p>
<p>/<em>将这个文件mv到网页默认目录下</em>/<br>[<a href="mailto:root@jsdig.com" target="_blank" rel="noopener">root@jsdig.com</a> ~]# mv index.html /var/www/html/</p>
<p>/*</p>
<ul>
<li>这个时候我们使用firefox浏览器输入127.0.0.1/index.html发现打不开，</li>
<li>查看一下SELinux的日志文件，发现了下面这一段报错信息，从这个报错信息不难看出，</li>
<li>进程httpd访问网页主目录中的index.html时被SELinux阻止，原因是因为，SELinux配置信息不正确,</li>
<li>正确的SELinux配置信息应该是scontext=后面的部分，</li>
<li>而index.html文件的SELinux配置信息却是tcontext=后面的部分，</li>
<li>从tcontext=的第三段“admin_home_t”不难看出，这个文件的SELinux配置信息是root用户家目录的。<br>*/<br>type=AVC msg=audit(1378974214.610:465): avc:  denied  { open } for  pid=2359 comm=”httpd” path=”/var/www/html/index.html” dev=”sda1” ino=1317685 scontext=system_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:admin_home_t:s0 tclass=file</li>
</ul>
<p>/<em>使用ls -Z也可以看出,文件和目录的SELinux信息不匹配</em>/<br>[<a href="mailto:root@jsdig.com" target="_blank" rel="noopener">root@jsdig.com</a> html]# ls -Z /var/www/html/<br>…. unconfined_u:object_r:admin_home_t:s0 index.html</p>
<p>[<a href="mailto:root@jsdig.com" target="_blank" rel="noopener">root@jsdig.com</a> html]# ls -Zd /var/www/html/<br>…. system_u:object_r:httpd_sys_content_t:s0 /var/www/html/</p>
<p>/<em>使用restorecon来恢复网页主目录中所有文件的SELinux配置信息(如果目标为一个目录，可以添加-R参数递归)</em>/<br>[<a href="mailto:root@jsdig.com" target="_blank" rel="noopener">root@jsdig.com</a> html]# restorecon -R /var/www/html/<br><code>`</code></p>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/restorecon/" data-id="cjwp0a8vs00avgcxibt2oazh8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/restore" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/restore/" class="article-date">
  <time datetime="2019-05-15T13:24:15.105Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="restore"><a href="#restore" class="headerlink" title="restore"></a>restore</h1><p>所进行的操作和dump指令相反</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>restore命令</strong> 是dump命令的逆过程，用于还原dump命令生成的备份文件。倾倒操作可用来备份文件，而还原操作则是写回这些已备份的文件。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restore(选项)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-b&lt;区块大小&gt;：设置区块大小，单位为Byte；</span><br><span class="line">-c：不检查倾倒操作的备份格式，仅准许读取使用旧格式的备份文件；</span><br><span class="line">-C：使用对比模式，将备份的文件与现行的文件相互对比；</span><br><span class="line">-D&lt;文件系统&gt;：允许用户指定文件系统的名称；</span><br><span class="line">-f&lt;备份文件&gt;：从指定的文件中读取备份数据，进行还原操作；</span><br><span class="line">-h：仅解除目录而不包括与该目录相关的所有文件；</span><br><span class="line">-i：使用互动模式，在进行还原操作时，restore指令将依序询问用户；</span><br><span class="line">-m：解开符合指定的inode编号的文件或目录而非用文件名称指定；</span><br><span class="line">-r：进行还原操作；</span><br><span class="line">-R：全面还原文件系统时，检查应从何处开始进行；</span><br><span class="line">-s&lt;文件编号&gt;：当备份数据超过一卷磁带时，用户可以指定备份文件的编号；</span><br><span class="line">-t：指定文件名称，若该文件已存在备份文件中，则列出它们的名称；</span><br><span class="line">-v：显示指令执行过程；</span><br><span class="line">-x：设置文件名称，且从指定的存储媒体里读入它们，若该文件已存在在备份文件中，则将其还原到文件系统内；</span><br><span class="line">-y：不询问任何问题，一律以同意回答并继续执行指令。</span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dump -9 -u -f /dev/hda3 /home/frank/</span><br></pre></td></tr></table></figure>
<p>用restore命令来恢复备份：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restore rf /dev/hda3 /home/frank</span><br></pre></td></tr></table></figure>
<p>用restore命令来查看备份文件里的文件列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restore ft /dev/hda3</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/restore/" data-id="cjwp0a8vr00augcxiqibunmgw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/resize" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/resize/" class="article-date">
  <time datetime="2019-05-15T13:24:15.103Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="resize"><a href="#resize" class="headerlink" title="resize"></a>resize</h1><p>命令设置终端机视窗的大小。</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>resize命令</strong> 命令设置终端机视窗的大小。执行resize指令可设置虚拟终端机的视窗大小。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resize [-cu][-s &lt;列数&gt; &lt;行数&gt;]</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-c 　就算用户环境并非C Shell，也用C Shell指令改变视窗大小。</span><br><span class="line">-s &lt;列数&gt; &lt;行数&gt; 　设置终端机视窗的垂直高度和水平宽度。</span><br><span class="line">-u 　就算用户环境并非Bourne Shell，也用Bourne Shell指令改变视窗大小。</span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>使用 C shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# resize -c</span><br><span class="line">set noglob;</span><br><span class="line">setenv COLUMNS &apos;99&apos;;</span><br><span class="line">setenv LINES &apos;34&apos;;</span><br><span class="line">unset noglob;</span><br></pre></td></tr></table></figure>
<p>使用 Bourne shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# resize -u</span><br><span class="line">COLUMNS=99;</span><br><span class="line">LINES=34;</span><br><span class="line">export COLUMNS LINES;</span><br></pre></td></tr></table></figure>
<p>设置指定大小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# resize -s 80 160</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/resize/" data-id="cjwp0a8vr00atgcxii2osgd2y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/repquota" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/repquota/" class="article-date">
  <time datetime="2019-05-15T13:24:15.101Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="repquota"><a href="#repquota" class="headerlink" title="repquota"></a>repquota</h1><p>报表的格式输出磁盘空间限制的状态</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>repquota命令</strong> 以报表的格式输出指定分区，或者文件系统的磁盘配额信息。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repquota(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-a：列出在/etc/fstab文件里，有加入quota设置的分区的使用状况，包括用户和群组；</span><br><span class="line">-g：列出所有群组的磁盘空间限制；</span><br><span class="line">-u：列出所有用户的磁盘空间限制；</span><br><span class="line">-v：显示该用户或群组的所有空间限制。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>文件系统：要打印报表的文件系统或者对应的设备文件名。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>显示所有文件系统的磁盘使用情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repquota -a</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/repquota/" data-id="cjwp0a8vq00asgcxiup06h4d0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/renice" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/renice/" class="article-date">
  <time datetime="2019-05-15T13:24:15.099Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="renice"><a href="#renice" class="headerlink" title="renice"></a>renice</h1><p>修改正在运行的进程的调度优先级</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>renice命令</strong> 可以修改正在运行的进程的调度优先级。预设是以程序识别码指定程序调整其优先权，您亦可以指定程序群组或用户名称调整优先权等级，并修改所有隶属于该程序群组或用户的程序的优先权。只有系统管理者可以改变其他用户程序的优先权，也仅有系统管理者可以设置负数等级。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renice(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-g：指定进程组id；</span><br><span class="line">-p&lt;程序识别码&gt;：改变该程序的优先权等级，此参数为预设值。</span><br><span class="line">-u：指定开启进程的用户名。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>进程号：指定要修改优先级的进程。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>将行程id为987及32的行程与行程拥有者为daemon及root的优先序号码加1：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">renice 1 987 -u daemon root -p 32</span><br></pre></td></tr></table></figure>
<p>注意：每一个行程都有一个唯一的id。</p>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/renice/" data-id="cjwp0a8vq00argcxib867h4dn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/rename" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/rename/" class="article-date">
  <time datetime="2019-05-15T13:24:15.097Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="rename"><a href="#rename" class="headerlink" title="rename"></a>rename</h1><p>用字符串替换的方式批量改变文件名</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>rename命令</strong> 用字符串替换的方式批量改变文件名。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename(参数)</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">原字符串：将文件名需要替换的字符串；</span><br><span class="line">目标字符串：将文件名中含有的原字符替换成目标字符串；</span><br><span class="line">文件：指定要改变文件名的文件列表。</span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>将main1.c重命名为main.c</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename main1.c main.c main1.c</span><br></pre></td></tr></table></figure>
<p> <strong>rename支持通配符</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?  可替代单个字符</span><br><span class="line">*  可替代多个字符</span><br><span class="line">[charset]  可替代charset集中的任意单个字符</span><br></pre></td></tr></table></figure>
<p>文件夹中有这些文件foo1, …, foo9, foo10, …, foo278</p>
<p>如果使用<code>rename foo foo0 foo?</code>，会把foo1到foo9的文件重命名为foo01到foo09，重命名的文件只是有4个字符长度名称的文件，文件名中的foo被替换为foo0。</p>
<p>如果使用<code>rename foo foo0 foo??</code>，foo01到foo99的所有文件都被重命名为foo001到foo099，只重命名5个字符长度名称的文件，文件名中的foo被替换为foo0。</p>
<p>如果使用<code>rename foo foo0 foo*</code>，foo001到foo278的所有文件都被重命名为foo0001到foo0278，所有以foo开头的文件都被重命名。</p>
<p>如果使用<code>rename foo0 foo foo0[2]*</code>，从foo0200到foo0278的所有文件都被重命名为foo200到foo278，文件名中的foo0被替换为foo。</p>
<p> <strong>rename支持正则表达式</strong> </p>
<p>字母的替换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &quot;s/AA/aa/&quot; *  //把文件名中的AA替换成aa</span><br></pre></td></tr></table></figure>
<p>修改文件的后缀</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &quot;s//.html//.php/&quot; *     //把.html 后缀的改成 .php后缀</span><br></pre></td></tr></table></figure>
<p>批量添加文件后缀</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &quot;s/$//.txt/&quot; *     //把所有的文件名都以txt结尾</span><br></pre></td></tr></table></figure>
<p>批量删除文件名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename &quot;s//.txt//&quot; *      //把所有以.txt结尾的文件名的.txt删掉</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/rename/" data-id="cjwp0a8vp00aqgcxih5ey9i65" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/reject" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/reject/" class="article-date">
  <time datetime="2019-05-15T13:24:15.095Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="reject"><a href="#reject" class="headerlink" title="reject"></a>reject</h1><p>指示打印系统拒绝发往指定目标打印机的打印任务</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>reject命令</strong> 属于CUPS套件，用于指示打印系统拒绝发往指定目标打印机的打印任务。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reject(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-E：当连接到服务器时强制使用加密；</span><br><span class="line">-U：指定连接服务器时使用的用户名；</span><br><span class="line">-h：指定连接服务器名和端口号；</span><br><span class="line">-r：指定拒绝打印任务的原因。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>目标：指定目标打印机。</p>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/reject/" data-id="cjwp0a8vo00apgcxi17yzfvly" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/reboot" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/reboot/" class="article-date">
  <time datetime="2019-05-15T13:24:15.078Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="reboot"><a href="#reboot" class="headerlink" title="reboot"></a>reboot</h1><p>重新启动正在运行的Linux操作系统</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>reboot命令</strong> 用来重新启动正在运行的Linux操作系统。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot(选项)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-d：重新开机时不把数据写入记录文件/var/tmp/wtmp。本参数具有“-n”参数效果；</span><br><span class="line">-f：强制重新开机，不调用shutdown指令的功能；</span><br><span class="line">-i：在重开机之前，先关闭所有网络界面；</span><br><span class="line">-n：重开机之前不检查是否有未结束的程序；</span><br><span class="line">-w：仅做测试，并不真正将系统重新开机，只会把重开机的数据写入/var/log目录下的wtmp记录文件。</span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reboot        //重开机。</span><br><span class="line">reboot -w     //做个重开机的模拟（只有纪录并不会真的重开机）。</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/reboot/" data-id="cjwp0a8vo00aogcxigkismvls" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/readonly" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/readonly/" class="article-date">
  <time datetime="2019-05-15T13:24:15.076Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h1><p>定义只读shell变量或函数</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>readonly命令</strong> 用于定义只读shell变量和shell函数。readonly命令的选项-p可以输出显示系统中所有定义的只读变量。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readonly(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-f：定义只读函数；</span><br><span class="line">-a：定义只读数组变量；</span><br><span class="line">-p：显示系统中全部只读变量列表。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>变量定义：定义变量，格式为“变量名=‘变量值’”。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>使用readonly命令显示系统中所有的已经定义的只读变量，输入如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# readonly     #显示只读变量</span><br><span class="line">declare -ar BASH_VERSINFO=&apos;([0]=&quot;3&quot; [1]=&quot;2&quot; [2]=&quot;25&quot; [3]=&quot;1&quot; [4]=&quot;release&quot; [5]=&quot;i686-redhat-linux-gnu&quot;)&apos;</span><br><span class="line">declare -ir EUID=&quot;0&quot;</span><br><span class="line">declare -ir PPID=&quot;31436&quot;</span><br><span class="line">declare -r SHELLOPTS=&quot;braceexpand:emacs:hashall:histexpand:history:interactive-comments:monitor&quot;</span><br><span class="line">declare -ir UID=&quot;0&quot;</span><br></pre></td></tr></table></figure>
<p>对于只读变量而言，若用户对其值进行修改，则会立即报错。例如，使用该指令定义一个只读变量”test”，并且将其值初始化为”ok”，输入如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# readonly test=&apos;ok&apos;        #定义只读变量并初始化</span><br></pre></td></tr></table></figure>
<p>那么当用户直接修改该只读变量时，就会被报错，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# test=&apos;my&apos;                 #试图修改只读变量的值</span><br><span class="line">-bash: test: readonly variable</span><br></pre></td></tr></table></figure>
<p>当用户试图修改只读变量的值时，会被提示该变量为只读变量。</p>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/readonly/" data-id="cjwp0a8vn00angcxinu412cga" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/readelf" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/readelf/" class="article-date">
  <time datetime="2019-05-15T13:24:15.074Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="readelf"><a href="#readelf" class="headerlink" title="readelf"></a>readelf</h1><p>用于显示elf格式文件的信息</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>readelf命令</strong> 用来显示一个或者多个elf格式的目标文件的信息，可以通过它的选项来控制显示哪些信息。这里的elf-file(s)就表示那些被检查的文件。可以支持32位，64位的elf格式文件，也支持包含elf文件的文档（这里一般指的是使用ar命令将一些elf文件打包之后生成的例如lib*.a之类的“静态库”文件）。 </p>
<p>这个程序和objdump提供的功能类似，但是它显示的信息更为具体，并且它不依赖BFD库(BFD库是一个GNU项目，它的目标就是希望通过一种统一的接口来处理不同的目标文件)，所以即使BFD库有什么bug存在的话也不会影响到readelf程序。 </p>
<p>运行readelf的时候，除了-v和-H之外，其它的选项必须有一个被指定。 </p>
<h3 id="ELF文件类型"><a href="#ELF文件类型" class="headerlink" title="ELF文件类型"></a>ELF文件类型</h3><p> <strong>种类型的ELF文件：</strong> </p>
<ol>
<li>可重定位文件:用户和其他目标文件一起创建可执行文件或者共享目标文件,例如lib*.a文件。 </li>
<li>可执行文件：用于生成进程映像，载入内存执行,例如编译好的可执行文件a.out。 </li>
<li><p>共享目标文件：用于和其他共享目标文件或者可重定位文件一起生成elf目标文件或者和执行文件一起创建进程映像，例如lib*.so文件。 </p>
<p><strong>ELF文件作用：</strong> </p>
</li>
</ol>
<p>ELF文件参与程序的连接(建立一个程序)和程序的执行(运行一个程序)，所以可以从不同的角度来看待elf格式的文件： </p>
<ol>
<li>如果用于编译和链接（可重定位文件），则编译器和链接器将把elf文件看作是节头表描述的节的集合,程序头表可选。 </li>
<li>如果用于加载执行（可执行文件），则加载器则将把elf文件看作是程序头表描述的段的集合，一个段可能包含多个节，节头表可选。 </li>
<li><p>如果是共享文件，则两者都含有。 </p>
<p><strong>ELF文件总体组成：</strong>  </p>
</li>
</ol>
<p>elf文件头描述elf文件的总体信息。包括：系统相关，类型相关，加载相关，链接相关。 </p>
<ul>
<li>系统相关表示：elf文件标识的魔术数，以及硬件和平台等相关信息，增加了elf文件的移植性,使交叉编译成为可能。 </li>
<li>类型相关就是前面说的那个类型。 </li>
<li>加载相关：包括程序头表相关信息。 </li>
<li>链接相关：节头表相关信息。 </li>
</ul>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">-a </span><br><span class="line">--all 显示全部信息,等价于 -h -l -S -s -r -d -V -A -I. </span><br><span class="line"></span><br><span class="line">-h </span><br><span class="line">--file-header 显示elf文件开始的文件头信息. </span><br><span class="line"></span><br><span class="line">-l </span><br><span class="line">--program-headers  </span><br><span class="line">--segments 显示程序头（段头）信息(如果有的话)。 </span><br><span class="line"></span><br><span class="line">-S </span><br><span class="line">--section-headers  </span><br><span class="line">--sections 显示节头信息(如果有的话)。 </span><br><span class="line"></span><br><span class="line">-g </span><br><span class="line">--section-groups 显示节组信息(如果有的话)。 </span><br><span class="line"></span><br><span class="line">-t </span><br><span class="line">--section-details 显示节的详细信息(-S的)。 </span><br><span class="line"></span><br><span class="line">-s </span><br><span class="line">--syms        </span><br><span class="line">--symbols 显示符号表段中的项（如果有的话）。 </span><br><span class="line"></span><br><span class="line">-e </span><br><span class="line">--headers 显示全部头信息，等价于: -h -l -S </span><br><span class="line"></span><br><span class="line">-n </span><br><span class="line">--notes 显示note段（内核注释）的信息。 </span><br><span class="line"></span><br><span class="line">-r </span><br><span class="line">--relocs 显示可重定位段的信息。 </span><br><span class="line"></span><br><span class="line">-u </span><br><span class="line">--unwind 显示unwind段信息。当前只支持IA64 ELF的unwind段信息。 </span><br><span class="line"></span><br><span class="line">-d </span><br><span class="line">--dynamic 显示动态段的信息。 </span><br><span class="line"></span><br><span class="line">-V </span><br><span class="line">--version-info 显示版本段的信息。 </span><br><span class="line"></span><br><span class="line">-A </span><br><span class="line">--arch-specific 显示CPU构架信息。 </span><br><span class="line"></span><br><span class="line">-D </span><br><span class="line">--use-dynamic 使用动态段中的符号表显示符号，而不是使用符号段。 </span><br><span class="line"></span><br><span class="line">-x &lt;number or name&gt; </span><br><span class="line">--hex-dump=&lt;number or name&gt; 以16进制方式显示指定段内内容。number指定段表中段的索引,或字符串指定文件中的段名。 </span><br><span class="line"></span><br><span class="line">-w[liaprmfFsoR] or </span><br><span class="line">--debug-dump[=line,=info,=abbrev,=pubnames,=aranges,=macro,=frames,=frames-interp,=str,=loc,=Ranges] 显示调试段中指定的内容。 </span><br><span class="line"></span><br><span class="line">-I </span><br><span class="line">--histogram 显示符号的时候，显示bucket list长度的柱状图。 </span><br><span class="line"></span><br><span class="line">-v </span><br><span class="line">--version 显示readelf的版本信息。 </span><br><span class="line"></span><br><span class="line">-H </span><br><span class="line">--help 显示readelf所支持的命令行选项。 </span><br><span class="line"></span><br><span class="line">-W </span><br><span class="line">--wide 宽行输出。 </span><br><span class="line"></span><br><span class="line">@file 可以将选项集中到一个文件中，然后使用这个@file选项载入。</span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>先给出如下例子：</p>
<p> <strong>1.对于可执行文件形式的elf格式文件：</strong> </p>
<p>1)查看可执行程序的源代码如下： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@localhost [test]$ cat main.cpp </span><br><span class="line">#include &lt;iostream&gt; </span><br><span class="line">using std::cout; </span><br><span class="line">using std::endl; </span><br><span class="line">void my_print(); </span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[]) </span><br><span class="line">&#123; </span><br><span class="line">        my_print(); </span><br><span class="line">        cout&lt;&lt;&quot;hello!&quot;&lt;&lt;endl; </span><br><span class="line">        return 0; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">void  my_print() </span><br><span class="line">&#123; </span><br><span class="line">        cout&lt;&lt;&quot;print!&quot;&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2)编译如下： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ g++ main.cpp -o main </span><br><span class="line">[root@localhost test]$ g++ -g main.cpp -o main.debug</span><br></pre></td></tr></table></figure>
<p>3)编译之后，查看生成的文件： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ ls -l </span><br><span class="line">总计 64 </span><br><span class="line">-rwxr-xr-x 1 quietheart quietheart  6700 07-07 18:04 main </span><br><span class="line">-rw-r--r-- 1 quietheart quietheart   201 07-07 18:02 main.cpp </span><br><span class="line">-rwxr-xr-x 1 quietheart quietheart 38932 07-07 18:04 main.debug</span><br></pre></td></tr></table></figure>
<p>这里，main.debug是带有调试信息的可执行文件，main是一般的可执行文件。 </p>
<p> <strong>2.对于库文件形式的elf格式文件：</strong> </p>
<p>1)查看库的源代码如下： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//myfile.h </span><br><span class="line">#ifndef __MYFILE_H </span><br><span class="line">#define __MYFILE_H </span><br><span class="line">void printInfo(); </span><br><span class="line">#endif </span><br><span class="line"></span><br><span class="line">//myfile.cpp </span><br><span class="line">#include &quot;myfile.h&quot; </span><br><span class="line">#include &lt;iostream&gt; </span><br><span class="line">using std::cout; </span><br><span class="line">using std::endl; </span><br><span class="line">void printInfo() </span><br><span class="line">&#123; </span><br><span class="line">    cout&lt;&lt;&quot;hello&quot;&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2)编译如下： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ g++ -c myfile.cpp </span><br><span class="line">[root@localhost test]$ g++ -shared -fPCI -o libmy.so myfile.o </span><br><span class="line">[root@localhost test]$ ar -r libmy.a myfile.o </span><br><span class="line">ar: creating libmy.a</span><br></pre></td></tr></table></figure>
<p>3)编译之后，查看生成的文件： </p>
<p>[root@localhost test]$ ls -l </p>
<p>总计 44 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r-- 1 quietheart quietheart 2154 07-08 16:14 libmy.a </span><br><span class="line">-rwxr-xr-x 1 quietheart quietheart 5707 07-08 16:08 libmy.so </span><br><span class="line">-rwxr-xr-x 1 quietheart quietheart  117 07-08 16:06 myfile.cpp </span><br><span class="line">-rwxr-xr-x 1 quietheart quietheart   63 07-08 16:08 myfile.h </span><br><span class="line">-rw-r--r-- 1 quietheart quietheart 2004 07-08 16:08 myfile.o </span><br><span class="line">libmy.a  libmy.so  myfile.cpp  myfile.h  myfile.o</span><br></pre></td></tr></table></figure>
<p>这里，分别生成目标文件myfile.o，共享库文件libmy.so，和静态库文件libmy.a。 </p>
<p>基于以上可执行文件和库，这里给出一些常用的命令。 </p>
<p> <strong>读取可执行文件形式的elf文件头信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -h main </span><br><span class="line">ELF Header: </span><br><span class="line">  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 </span><br><span class="line">  Class:                             ELF32 </span><br><span class="line">  Data:                              2&apos;s complement, little endian </span><br><span class="line">  Version:                           1 (current) </span><br><span class="line">  OS/ABI:                            UNIX - System V </span><br><span class="line">  ABI Version:                       0 </span><br><span class="line">  type:                              exec (Executable file) </span><br><span class="line">  Machine:                           Intel 80386 </span><br><span class="line">  Version:                           0x1 </span><br><span class="line">  Entry point address:               0x8048580 </span><br><span class="line">  Start of program headers:          52 (bytes into file) </span><br><span class="line">  Start of section headers:          3232 (bytes into file) </span><br><span class="line">  Flags:                             0x0 </span><br><span class="line">  Size of this header:               52 (bytes) </span><br><span class="line">  Size of program headers:           32 (bytes) </span><br><span class="line">  Number of program headers:         8 </span><br><span class="line">  Size of section headers:           40 (bytes) </span><br><span class="line">  Number of section headers:         29 </span><br><span class="line">  Section header string table index: 26</span><br></pre></td></tr></table></figure>
<p>这里，可见可执行文件的elf文件，其类型为EXEC(可执行文件)。另外，含调试信息的”main.debug”和不含调试信息的”main”除了一些大小信息之外，其内容是一样的。并且由此可见文件的体系结构为Intel 80386。 </p>
<p> <strong>读取目标文件形式的elf文件头信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -h myfile.o </span><br><span class="line">ELF Header: </span><br><span class="line">  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 </span><br><span class="line">  Class:                             ELF32 </span><br><span class="line">  Data:                              2&apos;s complement, little endian </span><br><span class="line">  Version:                           1 (current) </span><br><span class="line">  OS/ABI:                            UNIX - System V </span><br><span class="line">  ABI Version:                       0 </span><br><span class="line">  Type:                              REL (Relocatable file) </span><br><span class="line">  Machine:                           Intel 80386 </span><br><span class="line">  Version:                           0x1 </span><br><span class="line">  Entry point address:               0x0 </span><br><span class="line">  Start of program headers:          0 (bytes into file) </span><br><span class="line">  Start of section headers:          516 (bytes into file) </span><br><span class="line">  Flags:                             0x0 </span><br><span class="line">  Size of this header:               52 (bytes) </span><br><span class="line">  Size of program headers:           0 (bytes) </span><br><span class="line">  Number of program headers:         0 </span><br><span class="line">  Size of section headers:           40 (bytes) </span><br><span class="line">  Number of section headers:         15 </span><br><span class="line">  Section header string table index: 12</span><br></pre></td></tr></table></figure>
<p>这里，可见目标文件的elf文件，其类型为REL(可重定位文件)。 </p>
<p> <strong>读取静态库文件形式的elf文件头信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -h libmy.a </span><br><span class="line">File: libmy.a(myfile.o) </span><br><span class="line">ELF Header: </span><br><span class="line">  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 </span><br><span class="line">  Class:                             ELF32 </span><br><span class="line">  Data:                              2&apos;s complement, little endian </span><br><span class="line">  Version:                           1 (current) </span><br><span class="line">  OS/ABI:                            UNIX - System V </span><br><span class="line">  ABI Version:                       0 </span><br><span class="line">  Type:                              REL (Relocatable file) </span><br><span class="line">  Machine:                           Intel 80386 </span><br><span class="line">  Version:                           0x1 </span><br><span class="line">  Entry point address:               0x0 </span><br><span class="line">  Start of program headers:          0 (bytes into file) </span><br><span class="line">  Start of section headers:          516 (bytes into file) </span><br><span class="line">  Flags:                             0x0 </span><br><span class="line">  Size of this header:               52 (bytes) </span><br><span class="line">  Size of program headers:           0 (bytes) </span><br><span class="line">  Number of program headers:         0 </span><br><span class="line">  Size of section headers:           40 (bytes) </span><br><span class="line">  Number of section headers:         15 </span><br><span class="line">  Section header string table index: 12</span><br></pre></td></tr></table></figure>
<p>这里，可见静态库文件的elf文件，其类型为REL(可重定位文件)。 </p>
<p> <strong>读取动态库文件形式的elf文件头信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -h libmy.so </span><br><span class="line">ELF Header: </span><br><span class="line">  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 </span><br><span class="line">  Class:                             ELF32 </span><br><span class="line">  Data:                              2&apos;s complement, little endian </span><br><span class="line">  Version:                           1 (current) </span><br><span class="line">  OS/ABI:                            UNIX - System V </span><br><span class="line">  ABI Version:                       0 </span><br><span class="line">  Type:                              DYN (Shared object file) </span><br><span class="line">  Machine:                           Intel 80386 </span><br><span class="line">  Version:                           0x1 </span><br><span class="line">  Entry point address:               0x550 </span><br><span class="line">  Start of program headers:          52 (bytes into file) </span><br><span class="line">  Start of section headers:          2768 (bytes into file) </span><br><span class="line">  Flags:                             0x0 </span><br><span class="line">  Size of this header:               52 (bytes) </span><br><span class="line">  Size of program headers:           32 (bytes) </span><br><span class="line">  Number of program headers:         5 </span><br><span class="line">  Size of section headers:           40 (bytes) </span><br><span class="line">  Number of section headers:         27 </span><br><span class="line">  Section header string table index: 24</span><br></pre></td></tr></table></figure>
<p>这里，可见动态库文件的elf文件，其类型为DYN(共享目标文件)。 </p>
<p> <strong>查看可执行的elf文件程序头表信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -l main </span><br><span class="line">Elf file type is EXEC (Executable file) </span><br><span class="line">Entry point 0x8048580 </span><br><span class="line">There are 8 program headers, starting at offset 52 </span><br><span class="line"></span><br><span class="line">Program Headers: </span><br><span class="line">  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align </span><br><span class="line">  PHDR           0x000034 0x08048034 0x08048034 0x00100 0x00100 R E 0x4 </span><br><span class="line">  INTERP         0x000134 0x08048134 0x08048134 0x00013 0x00013 R   0x1 </span><br><span class="line">      Requesting program interpreter: /lib/[ld-linux.so.2] </span><br><span class="line">  LOAD           0x000000 0x08048000 0x08048000 0x00970 0x00970 R E 0x1000 </span><br><span class="line">  LOAD           0x000970 0x08049970 0x08049970 0x00130 0x001c8 RW  0x1000 </span><br><span class="line">  DYNAMIC        0x000988 0x08049988 0x08049988 0x000e0 0x000e0 RW  0x4 </span><br><span class="line">  NOTE           0x000148 0x08048148 0x08048148 0x00020 0x00020 R   0x4 </span><br><span class="line">  GNU_EH_FRAME   0x000820 0x08048820 0x08048820 0x00044 0x00044 R   0x4 </span><br><span class="line">  GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RW  0x4 </span><br><span class="line"></span><br><span class="line">Section to Segment mapping: </span><br><span class="line">  Segment Sections... </span><br><span class="line">   00     </span><br><span class="line">   01     .interp </span><br><span class="line">   02     .interp .note.ABI-tag .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .plt .text .fini .rodata .eh_frame_hdr .eh_frame </span><br><span class="line">   03     .ctors .dtors .jcr .dynamic .got .got.plt .data .bss </span><br><span class="line">   04     .dynamic </span><br><span class="line">   05     .note.ABI-tag </span><br><span class="line">   06     .eh_frame_hdr </span><br><span class="line">   07</span><br></pre></td></tr></table></figure>
<p>这里，含调试信息的”main.debug”和不含调试信息的”main”其内容是一样的。 </p>
<p> <strong>查看目标文件的elf文件程序头表信息： </strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -l myfile.o </span><br><span class="line">There are no program headers in this file.</span><br></pre></td></tr></table></figure>
<p>这里可知，可重定位的目标文件，它没程序头表。 </p>
<p> <strong>查看静态库文件的elf文件程序头表信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -l libmy.a </span><br><span class="line">File: libmy.a(myfile.o) </span><br><span class="line">There are no program headers in this file.</span><br></pre></td></tr></table></figure>
<p>这里可知，可重定位的静态库文件，它没程序头表。 </p>
<p> <strong>查看动态库文件的elf文件程序头表信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -l libmy.so </span><br><span class="line">Elf file type is DYN (Shared object file) </span><br><span class="line">Entry point 0x550 </span><br><span class="line">There are 5 program headers, starting at offset 52 </span><br><span class="line"></span><br><span class="line">Program Headers: </span><br><span class="line">  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align </span><br><span class="line">  LOAD           0x000000 0x00000000 0x00000000 0x007f4 0x007f4 R E 0x1000 </span><br><span class="line">  LOAD           0x0007f4 0x000017f4 0x000017f4 0x0011c 0x00128 RW  0x1000 </span><br><span class="line">  DYNAMIC        0x000810 0x00001810 0x00001810 0x000e0 0x000e0 RW  0x4 </span><br><span class="line">  GNU_EH_FRAME   0x000738 0x00000738 0x00000738 0x0002c 0x0002c R   0x4 </span><br><span class="line">  GNU_STACK      0x000000 0x00000000 0x00000000 0x00000 0x00000 RW  0x4 </span><br><span class="line"></span><br><span class="line">Section to Segment mapping: </span><br><span class="line">  Segment Sections... </span><br><span class="line">   00     .gnu.hash .dynsym .dynstr .gnu.version .gnu.version_r .rel.dyn .rel.plt .init .plt .text .fini .rodata .eh_frame_hdr .eh_frame </span><br><span class="line">   01     .ctors .dtors .jcr .data.rel.ro .dynamic .got .got.plt .bss </span><br><span class="line">   02     .dynamic </span><br><span class="line">   03     .eh_frame_hdr </span><br><span class="line">   04</span><br></pre></td></tr></table></figure>
<p>这里可知，做为共享目标文件的动态库，它程序头表。 </p>
<p> <strong>查看一个可执行的elf文件的节信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -S main </span><br><span class="line">There are 29 section headers, starting at offset 0xca0: </span><br><span class="line">Section Headers: </span><br><span class="line">  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al </span><br><span class="line">  [ 0]                   NULL            00000000 000000 000000 00      0   0  0 </span><br><span class="line">  [ 1] .interp           PROGBITS        08048134 000134 000013 00   A  0   0  1 </span><br><span class="line">  [ 2] .note.ABI-tag     NOTE            08048148 000148 000020 00   A  0   0  4 </span><br><span class="line">  [ 3] .gnu.hash         GNU_HASH        08048168 000168 000030 04   A  4   0  4 </span><br><span class="line">  [ 4] .dynsym           DYNSYM          08048198 000198 0000d0 10   A  5   1  4 </span><br><span class="line">  [ 5] .dynstr           STRTAB          08048268 000268 000183 00   A  0   0  1 </span><br><span class="line">  [ 6] .gnu.version      VERSYM          080483ec 0003ec 00001a 02   A  4   0  2 </span><br><span class="line">  [ 7] .gnu.version_r    VERNEED         08048408 000408 000060 00   A  5   2  4 </span><br><span class="line">  [ 8] .rel.dyn          REL             08048468 000468 000010 08   A  4   0  4 </span><br><span class="line">  [ 9] .rel.plt          REL             08048478 000478 000048 08   A  4  11  4 </span><br><span class="line">  [10] .init             PROGBITS        080484c0 0004c0 000017 00  AX  0   0  4 </span><br><span class="line">  [11] .plt              PROGBITS        080484d8 0004d8 0000a0 04  AX  0   0  4 </span><br><span class="line">  [12] .text             PROGBITS        08048580 000580 000268 00  AX  0   0 16 </span><br><span class="line">  [13] .fini             PROGBITS        080487e8 0007e8 00001c 00  AX  0   0  4 </span><br><span class="line">  [14] .rodata           PROGBITS        08048804 000804 00001a 00   A  0   0  4 </span><br><span class="line">  [15] .eh_frame_hdr     PROGBITS        08048820 000820 000044 00   A  0   0  4 </span><br><span class="line">  [16] .eh_frame         PROGBITS        08048864 000864 00010c 00   A  0   0  4 </span><br><span class="line">  [17] .ctors            PROGBITS        08049970 000970 00000c 00  WA  0   0  4 </span><br><span class="line">  [18] .dtors            PROGBITS        0804997c 00097c 000008 00  WA  0   0  4 </span><br><span class="line">  [19] .jcr              PROGBITS        08049984 000984 000004 00  WA  0   0  4 </span><br><span class="line">  [20] .dynamic          DYNAMIC         08049988 000988 0000e0 08  WA  5   0  4 </span><br><span class="line">  [21] .got              PROGBITS        08049a68 000a68 000004 04  WA  0   0  4 </span><br><span class="line">  [22] .got.plt          PROGBITS        08049a6c 000a6c 000030 04  WA  0   0  4 </span><br><span class="line">  [23] .data             PROGBITS        08049a9c 000a9c 000004 00  WA  0   0  4 </span><br><span class="line">  [24] .bss              NOBITS          08049aa0 000aa0 000098 00  WA  0   0  8 </span><br><span class="line">  [25] .comment          PROGBITS        00000000 000aa0 000114 00      0   0  1 </span><br><span class="line">  [26] .shstrtab         STRTAB          00000000 000bb4 0000e9 00      0   0  1 </span><br><span class="line">  [27] .symtab           SYMTAB          00000000 001128 000510 10     28  53  4 </span><br><span class="line">  [28] .strtab           STRTAB          00000000 001638 0003f4 00      0   0  1 </span><br><span class="line">Key to Flags: </span><br><span class="line">  W (write), A (alloc), X (execute), M (merge), S (strings) </span><br><span class="line">  I (info), L (link order), G (group), x (unknown) </span><br><span class="line">  O (extra OS processing required) o (OS specific), p (processor specific)</span><br></pre></td></tr></table></figure>
<p>这里，main是可执行文件，不含调试信息。 </p>
<p> <strong>查看一个包含调试信息的可执行的elf文件的节信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -S main.debug </span><br><span class="line">There are 37 section headers, starting at offset 0x88c8: </span><br><span class="line"></span><br><span class="line">Section Headers: </span><br><span class="line">  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al </span><br><span class="line">  [ 0]                   NULL            00000000 000000 000000 00      0   0  0 </span><br><span class="line">  [ 1] .interp           PROGBITS        08048134 000134 000013 00   A  0   0  1 </span><br><span class="line">  [ 2] .note.ABI-tag     NOTE            08048148 000148 000020 00   A  0   0  4 </span><br><span class="line">  [ 3] .gnu.hash         GNU_HASH        08048168 000168 000030 04   A  4   0  4 </span><br><span class="line">  [ 4] .dynsym           DYNSYM          08048198 000198 0000d0 10   A  5   1  4 </span><br><span class="line">  [ 5] .dynstr           STRTAB          08048268 000268 000183 00   A  0   0  1 </span><br><span class="line">  [ 6] .gnu.version      VERSYM          080483ec 0003ec 00001a 02   A  4   0  2 </span><br><span class="line">  [ 7] .gnu.version_r    VERNEED         08048408 000408 000060 00   A  5   2  4 </span><br><span class="line">  [ 8] .rel.dyn          REL             08048468 000468 000010 08   A  4   0  4 </span><br><span class="line">  [ 9] .rel.plt          REL             08048478 000478 000048 08   A  4  11  4 </span><br><span class="line">  [10] .init             PROGBITS        080484c0 0004c0 000017 00  AX  0   0  4 </span><br><span class="line">  [11] .plt              PROGBITS        080484d8 0004d8 0000a0 04  AX  0   0  4 </span><br><span class="line">  [12] .text             PROGBITS        08048580 000580 000268 00  AX  0   0 16 </span><br><span class="line">  [13] .fini             PROGBITS        080487e8 0007e8 00001c 00  AX  0   0  4 </span><br><span class="line">  [14] .rodata           PROGBITS        08048804 000804 00001a 00   A  0   0  4 </span><br><span class="line">  [15] .eh_frame_hdr     PROGBITS        08048820 000820 000044 00   A  0   0  4 </span><br><span class="line">  [16] .eh_frame         PROGBITS        08048864 000864 00010c 00   A  0   0  4 </span><br><span class="line">  [17] .ctors            PROGBITS        08049970 000970 00000c 00  WA  0   0  4 </span><br><span class="line">  [18] .dtors            PROGBITS        0804997c 00097c 000008 00  WA  0   0  4 </span><br><span class="line">  [19] .jcr              PROGBITS        08049984 000984 000004 00  WA  0   0  4 </span><br><span class="line">  [20] .dynamic          DYNAMIC         08049988 000988 0000e0 08  WA  5   0  4 </span><br><span class="line">  [21] .got              PROGBITS        08049a68 000a68 000004 04  WA  0   0  4 </span><br><span class="line">  [22] .got.plt          PROGBITS        08049a6c 000a6c 000030 04  WA  0   0  4 </span><br><span class="line">  [23] .data             PROGBITS        08049a9c 000a9c 000004 00  WA  0   0  4 </span><br><span class="line">  [24] .bss              NOBITS          08049aa0 000aa0 000098 00  WA  0   0  8 </span><br><span class="line">  [25] .comment          PROGBITS        00000000 000aa0 000114 00      0   0  1 </span><br><span class="line">  [26] .debug_aranges    PROGBITS        00000000 000bb4 000020 00      0   0  1 </span><br><span class="line">  [27] .debug_pubnames   PROGBITS        00000000 000bd4 000028 00      0   0  1 </span><br><span class="line">  [28] .debug_info       PROGBITS        00000000 000bfc 0067aa 00      0   0  1 </span><br><span class="line">  [29] .debug_abbrev     PROGBITS        00000000 0073a6 000726 00      0   0  1 </span><br><span class="line">  [30] .debug_line       PROGBITS        00000000 007acc 0003e1 00      0   0  1 </span><br><span class="line">  [31] .debug_frame      PROGBITS        00000000 007eb0 00009c 00      0   0  4 </span><br><span class="line">  [32] .debug_str        PROGBITS        00000000 007f4c 000735 00      0   0  1 </span><br><span class="line">  [33] .debug_loc        PROGBITS        00000000 008681 0000f3 00      0   0  1 </span><br><span class="line">  [34] .shstrtab         STRTAB          00000000 008774 000151 00      0   0  1 </span><br><span class="line">  [35] .symtab           SYMTAB          00000000 008e90 000590 10     36  61  4 </span><br><span class="line">  [36] .strtab           STRTAB          00000000 009420 0003f4 00      0   0  1 </span><br><span class="line">Key to Flags: </span><br><span class="line">  W (write), A (alloc), X (execute), M (merge), S (strings) </span><br><span class="line">  I (info), L (link order), G (group), x (unknown) </span><br><span class="line">  O (extra OS processing required) o (OS specific), p (processor specific)</span><br></pre></td></tr></table></figure>
<p>可见，相对非调试版本的可执行文件，多了”.debug*”段的信息。 </p>
<p> <strong>查看一个目标文件的elf文件的节信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -S myfile.o </span><br><span class="line">There are 15 section headers, starting at offset 0x204: </span><br><span class="line"></span><br><span class="line">Section Headers: </span><br><span class="line">  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al </span><br><span class="line">  [ 0]                   NULL            00000000 000000 000000 00      0   0  0 </span><br><span class="line">  [ 1] .text             PROGBITS        00000000 000034 00009e 00  AX  0   0  4 </span><br><span class="line">  [ 2] .rel.text         REL             00000000 000744 000060 08     13   1  4 </span><br><span class="line">  [ 3] .data             PROGBITS        00000000 0000d4 000000 00  WA  0   0  4 </span><br><span class="line">  [ 4] .bss              NOBITS          00000000 0000d4 000001 00  WA  0   0  4 </span><br><span class="line">  [ 5] .ctors            PROGBITS        00000000 0000d4 000004 00  WA  0   0  4 </span><br><span class="line">  [ 6] .rel.ctors        REL             00000000 0007a4 000008 08     13   5  4 </span><br><span class="line">  [ 7] .rodata           PROGBITS        00000000 0000d8 000006 00   A  0   0  1 </span><br><span class="line">  [ 8] .eh_frame         PROGBITS        00000000 0000e0 00008c 00   A  0   0  4 </span><br><span class="line">  [ 9] .rel.eh_frame     REL             00000000 0007ac 000028 08     13   8  4 </span><br><span class="line">  [10] .comment          PROGBITS        00000000 00016c 00002e 00      0   0  1 </span><br><span class="line">  [11] .note.GNU-stack   PROGBITS        00000000 00019a 000000 00      0   0  1 </span><br><span class="line">  [12] .shstrtab         STRTAB          00000000 00019a 00006a 00      0   0  1 </span><br><span class="line">  [13] .symtab           SYMTAB          00000000 00045c 000180 10     14  14  4 </span><br><span class="line">  [14] .strtab           STRTAB          00000000 0005dc 000166 00      0   0  1 </span><br><span class="line">Key to Flags: </span><br><span class="line">  W (write), A (alloc), X (execute), M (merge), S (strings) </span><br><span class="line">  I (info), L (link order), G (group), x (unknown) </span><br><span class="line">  O (extra OS processing required) o (OS specific), p (processor specific)</span><br></pre></td></tr></table></figure>
<p> <strong>查看一个静态库文件的elf文件的节信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -S libmy.a </span><br><span class="line">File: libmy.a(myfile.o) </span><br><span class="line">There are 15 section headers, starting at offset 0x204: </span><br><span class="line"></span><br><span class="line">Section Headers: </span><br><span class="line">  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al </span><br><span class="line">  [ 0]                   NULL            00000000 000000 000000 00      0   0  0 </span><br><span class="line">  [ 1] .text             PROGBITS        00000000 000034 00009e 00  AX  0   0  4 </span><br><span class="line">  [ 2] .rel.text         REL             00000000 000744 000060 08     13   1  4 </span><br><span class="line">  [ 3] .data             PROGBITS        00000000 0000d4 000000 00  WA  0   0  4 </span><br><span class="line">  [ 4] .bss              NOBITS          00000000 0000d4 000001 00  WA  0   0  4 </span><br><span class="line">  [ 5] .ctors            PROGBITS        00000000 0000d4 000004 00  WA  0   0  4 </span><br><span class="line">  [ 6] .rel.ctors        REL             00000000 0007a4 000008 08     13   5  4 </span><br><span class="line">  [ 7] .rodata           PROGBITS        00000000 0000d8 000006 00   A  0   0  1 </span><br><span class="line">  [ 8] .eh_frame         PROGBITS        00000000 0000e0 00008c 00   A  0   0  4 </span><br><span class="line">  [ 9] .rel.eh_frame     REL             00000000 0007ac 000028 08     13   8  4 </span><br><span class="line">  [10] .comment          PROGBITS        00000000 00016c 00002e 00      0   0  1 </span><br><span class="line">  [11] .note.GNU-stack   PROGBITS        00000000 00019a 000000 00      0   0  1 </span><br><span class="line">  [12] .shstrtab         STRTAB          00000000 00019a 00006a 00      0   0  1 </span><br><span class="line">  [13] .symtab           SYMTAB          00000000 00045c 000180 10     14  14  4 </span><br><span class="line">  [14] .strtab           STRTAB          00000000 0005dc 000166 00      0   0  1 </span><br><span class="line">Key to Flags: </span><br><span class="line">  W (write), A (alloc), X (execute), M (merge), S (strings) </span><br><span class="line">  I (info), L (link order), G (group), x (unknown) </span><br><span class="line">  O (extra OS processing required) o (OS specific), p (processor specific)</span><br></pre></td></tr></table></figure>
<p> <strong>查看一个动态库文件的elf文件的节信息：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost test]$ readelf -S libmy.so </span><br><span class="line">There are 27 section headers, starting at offset 0xad0: </span><br><span class="line"></span><br><span class="line">Section Headers: </span><br><span class="line">  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al </span><br><span class="line">  [ 0]                   NULL            00000000 000000 000000 00      0   0  0 </span><br><span class="line">  [ 1] .gnu.hash         GNU_HASH        000000d4 0000d4 00003c 04   A  2   0  4 </span><br><span class="line">  [ 2] .dynsym           DYNSYM          00000110 000110 000120 10   A  3   1  4 </span><br><span class="line">  [ 3] .dynstr           STRTAB          00000230 000230 000199 00   A  0   0  1 </span><br><span class="line">  [ 4] .gnu.version      VERSYM          000003ca 0003ca 000024 02   A  2   0  2 </span><br><span class="line">  [ 5] .gnu.version_r    VERNEED         000003f0 0003f0 000050 00   A  3   2  4 </span><br><span class="line">  [ 6] .rel.dyn          REL             00000440 000440 0000b0 08   A  2   0  4 </span><br><span class="line">  [ 7] .rel.plt          REL             000004f0 0004f0 000010 08   A  2   9  4 </span><br><span class="line">  [ 8] .init             PROGBITS        00000500 000500 000017 00  AX  0   0  4 </span><br><span class="line">  [ 9] .plt              PROGBITS        00000518 000518 000030 04  AX  0   0  4 </span><br><span class="line">  [10] .text             PROGBITS        00000550 000550 0001c4 00  AX  0   0 16 </span><br><span class="line">  [11] .fini             PROGBITS        00000714 000714 00001c 00  AX  0   0  4 </span><br><span class="line">  [12] .rodata           PROGBITS        00000730 000730 000006 00   A  0   0  1 </span><br><span class="line">  [13] .eh_frame_hdr     PROGBITS        00000738 000738 00002c 00   A  0   0  4 </span><br><span class="line">  [14] .eh_frame         PROGBITS        00000764 000764 000090 00   A  0   0  4 </span><br><span class="line">  [15] .ctors            PROGBITS        000017f4 0007f4 00000c 00  WA  0   0  4 </span><br><span class="line">  [16] .dtors            PROGBITS        00001800 000800 000008 00  WA  0   0  4 </span><br><span class="line">  [17] .jcr              PROGBITS        00001808 000808 000004 00  WA  0   0  4 </span><br><span class="line">  [18] .data.rel.ro      PROGBITS        0000180c 00080c 000004 00  WA  0   0  4 </span><br><span class="line">  [19] .dynamic          DYNAMIC         00001810 000810 0000e0 08  WA  3   0  4 </span><br><span class="line">  [20] .got              PROGBITS        000018f0 0008f0 00000c 04  WA  0   0  4 </span><br><span class="line">  [21] .got.plt          PROGBITS        000018fc 0008fc 000014 04  WA  0   0  4 </span><br><span class="line">  [22] .bss              NOBITS          00001910 000910 00000c 00  WA  0   0  4 </span><br><span class="line">  [23] .comment          PROGBITS        00000000 000910 0000e6 00      0   0  1 </span><br><span class="line">  [24] .shstrtab         STRTAB          00000000 0009f6 0000da 00      0   0  1 </span><br><span class="line">  [25] .symtab           SYMTAB          00000000 000f08 000410 10     26  48  4 </span><br><span class="line">  [26] .strtab           STRTAB          00000000 001318 000333 00      0   0  1 </span><br><span class="line">Key to Flags: </span><br><span class="line">  W (write), A (alloc), X (execute), M (merge), S (strings) </span><br><span class="line">  I (info), L (link order), G (group), x (unknown) </span><br><span class="line">  O (extra OS processing required) o (OS specific), p (processor specific)</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/readelf/" data-id="cjwp0a8zd00g1gcxibfhc5ab1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/17/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/57/">57</a><a class="extend next" rel="next" href="/page/19/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARTS/">ARTS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARTS/" style="font-size: 20px;">ARTS</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/08/ARTS第八周/">ARTS第八周</a>
          </li>
        
          <li>
            <a href="/2019/05/25/ARTS第七周/">ARTS第七周</a>
          </li>
        
          <li>
            <a href="/2019/05/15/linux_command/znew/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/05/15/linux_command/zipsplit/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/05/15/linux_command/zipinfo/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>