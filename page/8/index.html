<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/8/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-linux_command/tree" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/tree/" class="article-date">
  <time datetime="2019-05-15T13:24:15.354Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="tree"><a href="#tree" class="headerlink" title="tree"></a>tree</h1><p>树状图列出目录的内容</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>tree命令</strong> 以树状图列出目录的内容。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tree(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">------- 列表选项 -------</span><br><span class="line">-a            <span class="comment"># 显示所有文件和目录。</span></span><br><span class="line">-d            <span class="comment"># 先是目录名称而非文件。</span></span><br><span class="line">-l            <span class="comment"># 如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录。</span></span><br><span class="line">-f            <span class="comment"># 在每个文件或目录之前，显示完整的相对路径名称。</span></span><br><span class="line">-x            <span class="comment"># 将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该目录予以排除在寻找范围外。</span></span><br><span class="line">-L level      <span class="comment"># 限制目录显示层级。</span></span><br><span class="line">-R            <span class="comment"># Rerun tree when max dir level reached.</span></span><br><span class="line">-P pattern    <span class="comment"># &lt;范本样式&gt; 只显示符合范本样式的文件和目录名称。</span></span><br><span class="line">-I pattern    <span class="comment"># Do not list files that match the given pattern.</span></span><br><span class="line">--ignore-case <span class="comment"># Ignore case when pattern matching.</span></span><br><span class="line">--matchdirs   <span class="comment"># Include directory names in -P pattern matching.</span></span><br><span class="line">--noreport    <span class="comment"># Turn off file/directory count at end of tree listing.</span></span><br><span class="line">--charset X   <span class="comment"># Use charset X for terminal/HTML and indentation line output.</span></span><br><span class="line">--filelimit <span class="comment"># # Do not descend dirs with more than # files in them.</span></span><br><span class="line">--timefmt &lt;f&gt; <span class="comment"># Print and format time according to the format &lt;f&gt;.</span></span><br><span class="line">-o filename   <span class="comment"># Output to file instead of stdout.</span></span><br><span class="line">-------- 文件选项 ---------</span><br><span class="line">-q            <span class="comment"># 用“？”号取代控制字符，列出文件和目录名称。</span></span><br><span class="line">-N            <span class="comment"># 直接列出文件和目录名称，包括控制字符。</span></span><br><span class="line">-Q            <span class="comment"># Quote filenames with double quotes.</span></span><br><span class="line">-p            <span class="comment"># 列出权限标示。</span></span><br><span class="line">-u            <span class="comment"># 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。</span></span><br><span class="line">-g            <span class="comment"># 列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码。</span></span><br><span class="line">-s            <span class="comment"># 列出文件和目录大小。</span></span><br><span class="line">-h            <span class="comment"># Print the size in a more human readable way.</span></span><br><span class="line">--si          <span class="comment"># Like -h, but use in SI units (powers of 1000).</span></span><br><span class="line">-D            <span class="comment"># 列出文件或目录的更改时间。</span></span><br><span class="line">-F            <span class="comment"># 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上"*"，"/"，"@"，"|"号。</span></span><br><span class="line">--inodes      <span class="comment"># Print inode number of each file.</span></span><br><span class="line">--device      <span class="comment"># Print device ID number to which each file belongs.</span></span><br><span class="line">------- 排序选项 -------</span><br><span class="line">-v            <span class="comment"># Sort files alphanumerically by version.</span></span><br><span class="line">-t            <span class="comment"># 用文件和目录的更改时间排序。</span></span><br><span class="line">-c            <span class="comment"># Sort files by last status change time.</span></span><br><span class="line">-U            <span class="comment"># Leave files unsorted.</span></span><br><span class="line">-r            <span class="comment"># Reverse the order of the sort.</span></span><br><span class="line">--dirsfirst   <span class="comment"># List directories before files (-U disables).</span></span><br><span class="line">--sort X      <span class="comment"># Select sort: name,version,size,mtime,ctime.</span></span><br><span class="line">------- 图形选项 ------</span><br><span class="line">-i            <span class="comment"># 不以阶梯状列出文件和目录名称。</span></span><br><span class="line">-A            <span class="comment"># 使用ASNI绘图字符显示树状图而非以ASCII字符组合。</span></span><br><span class="line">-S            <span class="comment"># Print with CP437 (console) graphics indentation lines.</span></span><br><span class="line">-n            <span class="comment"># Turn colorization off always (-C overrides).</span></span><br><span class="line">-C            <span class="comment"># 在文件和目录清单加上色彩，便于区分各种类型。</span></span><br><span class="line">------- XML / HTML / JSON选项 -------</span><br><span class="line">-X            <span class="comment"># Prints out an XML representation of the tree.</span></span><br><span class="line">-J            <span class="comment"># Prints out an JSON representation of the tree.</span></span><br><span class="line">-H baseHREF   <span class="comment"># Prints out HTML format with baseHREF as top directory.</span></span><br><span class="line">-T string     <span class="comment"># Replace the default HTML title and H1 header with string.</span></span><br><span class="line">--nolinks     <span class="comment"># Turn off hyperlinks in HTML output.</span></span><br><span class="line">---- 杂项选项 ----</span><br><span class="line">--version     <span class="comment"># 输入版本信息。</span></span><br><span class="line">--<span class="built_in">help</span>        <span class="comment"># 打印使用帮助信息。</span></span><br><span class="line">--            <span class="comment"># Options processing terminator.</span></span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>目录：执行tree指令，它会列出指定目录下的所有文件，包括子目录里的文件。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>列出目录<code>/private/</code> 第一级文件名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tree  /private/ -L 1</span><br><span class="line">/private/</span><br><span class="line">├── etc</span><br><span class="line">├── tftpboot</span><br><span class="line">├── tmp</span><br><span class="line">└── var</span><br></pre></td></tr></table></figure>
<p>忽略文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tree -I node_modules <span class="comment"># 忽略当前目录文件夹node_modules</span></span><br><span class="line">tree -P node_modules <span class="comment"># 列出当前目录文件夹node_modules的目录结构</span></span><br><span class="line">tree -P node_modules -L 2 <span class="comment"># 显示目录node_modules两层的目录树结构</span></span><br><span class="line">tree -L 2 &gt; /home/www/tree.txt <span class="comment"># 当前目录结果存到 tree.txt 文件中</span></span><br></pre></td></tr></table></figure>
<p>忽略多个文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tree -I <span class="string">'node_modules|icon|font'</span> -L 2</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/tree/" data-id="cjw4xtiww00dfr4xig32pb9wc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/trap" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/trap/" class="article-date">
  <time datetime="2019-05-15T13:24:15.351Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="trap"><a href="#trap" class="headerlink" title="trap"></a>trap</h1><p>指定在接收到信号后将要采取的动作</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>trap命令</strong> 用于指定在接收到信号后将要采取的动作，常见的用途是在脚本程序被中断时完成清理工作。当shell接收到sigspec指定的信号时，arg参数（命令）将会被读取，并被执行。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trap &quot;exit 1&quot; HUP INT PIPE QUIT TERM</span><br></pre></td></tr></table></figure>
<p>表示当shell收到HUP INT PIPE QUIT TERM这几个命令时，当前执行的程序会读取参数“exit 1”，并将它作为命令执行。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trap -[lp] [[arg] sigspec ...]</span><br></pre></td></tr></table></figure>
<h3 id="选项参数说明"><a href="#选项参数说明" class="headerlink" title="选项参数说明"></a>选项参数说明</h3><p>如果arg参数缺省或者为“-”，每个接收到的sigspec信号都将会被重置为它们进入shell时的值；</p>
<p>如果arg是空字符串每一个由sigspec指定的信号都会被shell和它所调用的命令忽略；</p>
<p>如果有<code>-p</code>选项而没有提供arg参数则会打印所有与sigspec指定信号相关联的的trap命令；</p>
<p>如果没有提供任何参数或者仅有-p选项，trap命令将会打印与每一个信号有关联的命令的列表；</p>
<p><code>-l</code>选项的作用是让shell打印一个命令名称和其相对应的编号的列表。</p>
<p>每个sigspec信号都是是以名字或者编号的形式定义在signal.h头文件中，信号的名字是不区分大小写的，其前缀SIG是可选的，如果某个信号是 EXIT（0），那么arg指定的命令将会在shell上执行退出命令时执行（If a sigspec is EXIT (0) the command arg is executed on exit from the shell），如果sigspec是DEBUG，那么arg指定的命令将会在以下每个命令执行之前执行：</p>
<p>简单命令，for语句，case语句，select命令，算法命令，在函数内的第一条命令。</p>
<p>更多trap debug的使用可以参考extdebug选项说明。</p>
<p>如果sigspec是ERR，arg参数指定的命令将会在任何简单命名执行完后返回值为非零值时执行，但是也有以下例外情况：</p>
<ol>
<li>如果执行失败的命令是紧跟在while或者until关键字之后的一组命令中的一部分时</li>
<li>如果执行失败的命令是if测试语句的一部分时，是 &amp;&amp; 和 ||连接的列表中的一部分时</li>
<li>如果执行失败的命令的返回值是被取反过的（通过!操作符）</li>
</ol>
<p>在以上情况中如果sigspec是ERR，arg命令不会执行，这些规则同样适用于errexit选项。如果sigspec是RETURN，arg指定的命令在每次shell函数或者脚本用”.”或者内置的命令执行完成后执行，在shell入口处被忽略的命令 是没法被trap和reset的，被trap的信号，在创建的子进程中使用时会在子进程被创建时被重置为原始的值。如果trap使用的sigspec信号 是invalid的信号则trap命令返回false（失败），否则返回成功（true）。</p>
<h3 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h3><p>信号是一种进程间通信机制，它给应用程序提供一种异步的软件中断，使应用程序有机会接受其他程序活终端发送的命令(即信号)。应用程序收到信号后，有三种处理方式：忽略，默认，或捕捉。进程收到一个信号后，会检查对该信号的处理机制。如果是SIG_IGN，就忽略该信号；如果是SIG_DFT，则会采用系统默认的处理动作，通常是终止进程或忽略该信号；如果给该信号指定了一个处理函数(捕捉)，则会中断当前进程正在执行的任务，转而去执行该信号的处理函数，返回后再继续执行被中断的任务。</p>
<p>在有些情况下，我们不希望自己的shell脚本在运行时刻被中断，比如说我们写得shell脚本设为某一用户的默认shell，使这一用户进入系统后只能作某一项工作，如数据库备份， 我们可不希望用户使用Ctrl c之类便进入到shell状态，做我们不希望做的事情。这便用到了信号处理。</p>
<p>以下是一些你可能会遇到的，要在程序中使用的更常见的信号：</p>
<table><br><br><tbody><br><br><tr><br><br><th width="100">信号名称</th><br><br><th width="60">信号数</th><br><br><th>描述</th><br><br></tr><br><br><tr><br><br><td>SIGHUP</td><br><br><td>1</td><br><br><td>本信号在用户终端连接(正常或非正常)结束时发出, 通常是在终端的控制进程结束时, 通知同一session内的各个作业, 这时它们与控制终端不再关联。 登录Linux时，系统会分配给登录用户一个终端(Session)。在这个终端运行的所有程序，包括前台进程组和后台进程组，一般都属于这个Session。当用户退出Linux登录时，前台进程组和后台有对终端输出的进程将会收到SIGHUP信号。这个信号的默认操作为终止进程，因此前台进程组和后台有终端输出的进程就会中止。对于与终端脱离关系的守护进程，这个信号用于通知它重新读取配置文件。</td><br><br></tr><br><br><tr><br><br><td>SIGINT</td><br><br><td>2</td><br><br><td>程序终止(interrupt)信号, 在用户键入INTR字符(通常是Ctrl C)时发出。</td><br><br></tr><br><br><tr><br><br><td>SIGQUIT</td><br><br><td>3</td><br><br><td>和SIGINT类似, 但由QUIT字符(通常是Ctrl /)来控制. 进程在因收到SIGQUIT退出时会产生core文件, 在这个意义上类似于一个程序错误信号。</td><br><br></tr><br><br><tr><br><br><td>SIGFPE</td><br><br><td>8</td><br><br><td>在发生致命的算术运算错误时发出. 不仅包括浮点运算错误, 还包括溢出及除数为0等其它所有的算术的错误。</td><br><br></tr><br><br><tr><br><br><td>SIGKILL</td><br><br><td>9</td><br><br><td>用来立即结束程序的运行. 本信号不能被阻塞, 处理和忽略。</td><br><br></tr><br><br><tr><br><br><td>SIGALRM</td><br><br><td>14</td><br><br><td>时钟定时信号, 计算的是实际的时间或时钟时间. alarm函数使用该信号。</td><br><br></tr><br><br><tr><br><br><td>SIGTERM</td><br><br><td>15</td><br><br><td>程序结束(terminate)信号, 与SIGKILL不同的是该信号可以被阻塞和处理. 通常用来要求程序自己正常退出. shell命令kill缺省产生这个信号。</td><br><br></tr><br><br></tbody><br><br></table>

<h3 id="捕获信号"><a href="#捕获信号" class="headerlink" title="捕获信号"></a>捕获信号</h3><p>当你按下 Ctrl + C 键或 Break 键在终端一个shell程序的执行过程中，正常程序将立即终止，并返回命令提示符。这可能并不总是可取的。例如，你可能最终留下了一堆临时文件，将不会清理。</p>
<p>捕获这些信号是很容易的，trap命令的语法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ trap commands signals</span><br></pre></td></tr></table></figure>
<p>这里的命令可以是任何有效的Linux命令，或一个用户定义的函数，信号可以是任意数量的信号，你想来捕获的列表。</p>
<p>在shell脚本中的陷阱有三种常见的用途：</p>
<ol>
<li>清理临时文件</li>
<li><p>忽略信号</p>
<p><strong>1、清理临时文件：</strong> </p>
</li>
</ol>
<p>trap命令作为一个例子，下面展示了如何可以删除一些文件，然后退出，如果有人试图从终端中止程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trap &quot;rm -f $WORKDIR/work1$ $WORKDIR/dataout$; exit&quot; 2</span><br></pre></td></tr></table></figure>
<p>执行shell程序，这个陷阱的角度，这两个文件work1$$ 和 dataout$$将被自动删除，如果程序接收信号数为2。</p>
<p>因此，用户中断执行，如果执行的程序后，这个陷阱你可以放心，这两个文件将被清理。 exit 命令如下 rm 是必要的，因为没有它的执行将继续在节目中的一点，它离开时收到信号。</p>
<p>1号信号产生挂断：要么有人故意挂断线路或线路被意外断开。</p>
<p>您可以修改前面的陷阱也删除指定的文件，在这种情况下，两个信号信号1号添加到列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ trap &quot;rm $WORKDIR/work1$ $WORKDIR/dataout$; exit&quot; 1 2</span><br></pre></td></tr></table></figure>
<p>现在，这些文件将被删除，如果该行被挂了，或者按Ctrl c键被按下。</p>
<p>来捕获指定的命令必须用引号括起来，如果它们包含一个以上的命令。另外请注意，在 shell 命令行扫描 trap 命令得到执行，并再次当一个所列出的的信号被接收的时间。</p>
<p>WORKDIR 值 $$ 所以在前面的例子中，将被取代 trap 命令执行的时间。如果你想这种替代发生在收到信号1或2的时间你可以把单引号内的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ trap &apos;rm $WORKDIR/work1$ $WORKDIR/dataout$; exit&apos; 1 2</span><br></pre></td></tr></table></figure>
<p> <strong>2、忽略信号：</strong> </p>
<p>如果陷阱列出的命令是空的，指定的信号接收时，将被忽略。例如，下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ trap &apos;&apos; 2</span><br></pre></td></tr></table></figure>
<p>指定的中断信号是被忽略的。你可能要忽略某些信号时进行一些操作，不希望打断。可以指定多个信号被忽略如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ trap &apos;&apos; 1 2 3 15</span><br></pre></td></tr></table></figure>
<p>注意，第一个参数必须被指定为一个信号被忽略，而不是相当于写入下面的内容，它具有独立的含义也各有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ trap  2</span><br></pre></td></tr></table></figure>
<p>如果你忽略了一个信号，所有的子shell也忽略该信号。不过，如果指定要采取的行动在收到的信号，所有的子shell仍然会在收到该信号的默认操作。</p>
<p> <strong>3、重设陷阱：</strong> </p>
<p>当你改变了默认在收到信号后应采取的动作，你可以改变它回来的陷阱，如果你只是省略第一个参数;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ trap 1 2</span><br></pre></td></tr></table></figure>
<p>复位应采取的动作收到信号1或2返回默认。</p>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/trap/" data-id="cjw4xtiyk00ftr4xiwi2qhjcw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/traceroute" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/traceroute/" class="article-date">
  <time datetime="2019-05-15T13:24:15.348Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h1><p>显示数据包到主机间的路径</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>traceroute命令</strong> 用于追踪数据包在网络上的传输时的全部路径，它默认发送的数据包大小是40字节。</p>
<p>通过traceroute我们可以知道信息从你的计算机到互联网另一端的主机是走的什么路径。当然每次数据包由某一同样的出发点（source）到达某一同样的目的地(destination)走的路径可能会不一样，但基本上来说大部分时候所走的路由是相同的。</p>
<p>traceroute通过发送小的数据包到目的设备直到其返回，来测量其需要多长时间。一条路径上的每个设备traceroute要测3次。输出结果中包括每次测试的时间(ms)和设备的名称（如有的话）及其ip地址。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-d：使用Socket层级的排错功能；</span><br><span class="line">-f&lt;存活数值&gt;：设置第一个检测数据包的存活数值TTL的大小；</span><br><span class="line">-F：设置勿离断位；</span><br><span class="line">-g&lt;网关&gt;：设置来源路由网关，最多可设置8个；</span><br><span class="line">-i&lt;网络界面&gt;：使用指定的网络界面送出数据包；</span><br><span class="line">-I：使用ICMP回应取代UDP资料信息；</span><br><span class="line">-m&lt;存活数值&gt;：设置检测数据包的最大存活数值TTL的大小；</span><br><span class="line">-n：直接使用IP地址而非主机名称；</span><br><span class="line">-p&lt;通信端口&gt;：设置UDP传输协议的通信端口；</span><br><span class="line">-r：忽略普通的Routing Table，直接将数据包送到远端主机上。</span><br><span class="line">-s&lt;来源地址&gt;：设置本地主机送出数据包的IP地址；</span><br><span class="line">-t&lt;服务类型&gt;：设置检测数据包的TOS数值；</span><br><span class="line">-v：详细显示指令的执行过程；</span><br><span class="line">-w&lt;超时秒数&gt;：设置等待远端主机回报的时间；</span><br><span class="line">-x：开启或关闭数据包的正确性检验。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>主机：指定目的主机IP地址或主机名。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">traceroute www.58.com</span><br><span class="line">traceroute to www.58.com (211.151.111.30), 30 hops max, 40 byte packets</span><br><span class="line"> 1  unknown (192.168.2.1)  3.453 ms  3.801 ms  3.937 ms</span><br><span class="line"> 2  221.6.45.33 (221.6.45.33)  7.768 ms  7.816 ms  7.840 ms</span><br><span class="line"> 3  221.6.0.233 (221.6.0.233)  13.784 ms  13.827 ms 221.6.9.81 (221.6.9.81)  9.758 ms</span><br><span class="line"> 4  221.6.2.169 (221.6.2.169)  11.777 ms 122.96.66.13 (122.96.66.13)  34.952 ms 221.6.2.53 (221.6.2.53)  41.372 ms</span><br><span class="line"> 5  219.158.96.149 (219.158.96.149)  39.167 ms  39.210 ms  39.238 ms</span><br><span class="line"> 6  123.126.0.194 (123.126.0.194)  37.270 ms 123.126.0.66 (123.126.0.66)  37.163 ms  37.441 ms</span><br><span class="line"> 7  124.65.57.26 (124.65.57.26)  42.787 ms  42.799 ms  42.809 ms</span><br><span class="line"> 8  61.148.146.210 (61.148.146.210)  30.176 ms 61.148.154.98 (61.148.154.98)  32.613 ms  32.675 ms</span><br><span class="line"> 9  202.106.42.102 (202.106.42.102)  44.563 ms  44.600 ms  44.627 ms</span><br><span class="line">10  210.77.139.150 (210.77.139.150)  53.302 ms  53.233 ms  53.032 ms</span><br><span class="line">11  211.151.104.6 (211.151.104.6)  39.585 ms  39.502 ms  39.598 ms</span><br><span class="line">12  211.151.111.30 (211.151.111.30)  35.161 ms  35.938 ms  36.005 ms</span><br></pre></td></tr></table></figure>
<p>记录按序列号从1开始，每个纪录就是一跳 ，每跳表示一个网关，我们看到每行有三个时间，单位是ms，其实就是<code>-q</code>的默认参数。探测数据包向每个网关发送三个数据包后，网关响应后返回的时间；如果用<code>traceroute -q 4 www.58.com</code>，表示向每个网关发送4个数据包。</p>
<p>有时我们traceroute一台主机时，会看到有一些行是以星号表示的。出现这样的情况，可能是防火墙封掉了ICMP的返回信息，所以我们得不到什么相关的数据包返回数据。</p>
<p>有时我们在某一网关处延时比较长，有可能是某台网关比较阻塞，也可能是物理设备本身的原因。当然如果某台DNS出现问题时，不能解析主机名、域名时，也会 有延时长的现象；您可以加<code>-n</code>参数来避免DNS解析，以IP格式输出数据。</p>
<p>如果在局域网中的不同网段之间，我们可以通过traceroute 来排查问题所在，是主机的问题还是网关的问题。如果我们通过远程来访问某台服务器遇到问题时，我们用到traceroute 追踪数据包所经过的网关，提交IDC服务商，也有助于解决问题；但目前看来在国内解决这样的问题是比较困难的，就是我们发现问题所在，IDC服务商也不可能帮助我们解决。</p>
<p><strong>跳数设置</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# traceroute -m 10 www.baidu.com</span><br><span class="line">traceroute to www.baidu.com (61.135.169.105), 10 hops max, 40 byte packets</span><br><span class="line"> 1  192.168.74.2 (192.168.74.2)  1.534 ms  1.775 ms  1.961 ms</span><br><span class="line"> 2  211.151.56.1 (211.151.56.1)  0.508 ms  0.514 ms  0.507 ms</span><br><span class="line"> 3  211.151.227.206 (211.151.227.206)  0.571 ms  0.558 ms  0.550 ms</span><br><span class="line"> 4  210.77.139.145 (210.77.139.145)  0.708 ms  0.729 ms  0.785 ms</span><br><span class="line"> 5  202.106.42.101 (202.106.42.101)  7.978 ms  8.155 ms  8.311 ms</span><br><span class="line"> 6  bt-228-037.bta.net.cn (202.106.228.37)  772.460 ms bt-228-025.bta.net.cn (202.106.228.25)  2.152 ms 61.148.154.97 (61.148.154.97)  772.107 ms</span><br><span class="line"> 7  124.65.58.221 (124.65.58.221)  4.875 ms 61.148.146.29 (61.148.146.29)  2.124 ms 124.65.58.221 (124.65.58.221)  4.854 ms</span><br><span class="line"> 8  123.126.6.198 (123.126.6.198)  2.944 ms 61.148.156.6 (61.148.156.6)  3.505 ms 123.126.6.198 (123.126.6.198)  2.885 ms</span><br><span class="line"> 9  * * *</span><br><span class="line">10  * * *</span><br></pre></td></tr></table></figure>
<p>其它一些实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">traceroute -m 10 www.baidu.com # 跳数设置</span><br><span class="line">traceroute -n www.baidu.com    # 显示IP地址，不查主机名</span><br><span class="line">traceroute -p 6888 www.baidu.com  # 探测包使用的基本UDP端口设置6888</span><br><span class="line">traceroute -q 4 www.baidu.com  # 把探测包的个数设置为值4</span><br><span class="line">traceroute -r www.baidu.com    # 绕过正常的路由表，直接发送到网络相连的主机</span><br><span class="line">traceroute -w 3 www.baidu.com  # 把对外发探测包的等待响应时间设置为3秒</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/traceroute/" data-id="cjw4xtiwu00dbr4xigh8rli76" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/tracepath" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/tracepath/" class="article-date">
  <time datetime="2019-05-15T13:24:15.346Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="tracepath"><a href="#tracepath" class="headerlink" title="tracepath"></a>tracepath</h1><p>追踪目的主机经过的路由信息</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>tracepath命令</strong> 用来追踪并显示报文到达目的主机所经过的路由信息。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tracepath(参数)</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><ul>
<li>目的主机：指定追踪路由信息的目的主机；</li>
<li>端口：指定使用的UDP端口号。</li>
</ul>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">tracepath www.58.com</span><br><span class="line"> 1:  192.168.2.10 (192.168.2.10)                           20.150ms pmtu 1500</span><br><span class="line"> 1:  unknown (192.168.2.1)                                  9.343ms</span><br><span class="line"> 2:  221.6.45.33 (221.6.45.33)                             34.430ms</span><br><span class="line"> 3:  221.6.9.81 (221.6.9.81)                               19.263ms</span><br><span class="line"> 4:  122.96.66.37 (122.96.66.37)                           54.372ms</span><br><span class="line"> 5:  219.158.96.149 (219.158.96.149)                      asymm  6 128.526ms</span><br><span class="line"> 6:  123.126.0.66 (123.126.0.66)                          138.281ms</span><br><span class="line"> 7:  124.65.57.26 (124.65.57.26)                          166.244ms</span><br><span class="line"> 8:  61.148.154.98 (61.148.154.98)                        103.723ms</span><br><span class="line"> 9:  202.106.42.102 (202.106.42.102)                      asymm 10  78.099ms</span><br><span class="line">10:  210.77.139.150 (210.77.139.150)                      asymm  9 199.930ms</span><br><span class="line">11:  211.151.104.6 (211.151.104.6)                        asymm 10 121.965ms</span><br><span class="line">12:  no reply</span><br><span class="line">13:  211.151.111.30 (211.151.111.30)                      asymm 12 118.989ms reached</span><br><span class="line">     Resume: pmtu 1500 hops 13 back 12</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/tracepath/" data-id="cjw4xtiwt00d9r4xir8mzhuyz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/tr" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/tr/" class="article-date">
  <time datetime="2019-05-15T13:24:15.344Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h1><p>将字符进行替换压缩和删除</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>tr命令</strong> 可以对来自标准输入的字符进行替换、压缩和删除。它可以将一组字符变成另一组字符，经常用来编写优美的单行命令，作用很强大。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-c或——complerment：取代所有不属于第一字符集的字符；</span><br><span class="line">-d或——delete：删除所有属于第一字符集的字符；</span><br><span class="line">-s或--squeeze-repeats：把连续重复的字符以单独一个字符表示；</span><br><span class="line">-t或--truncate-set1：先删除第一字符集较第二字符集多出的字符。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><ul>
<li>字符集1：指定要转换或删除的原字符集。当执行转换操作时，必须使用参数“字符集2”指定转换的目标字符集。但执行删除操作时，不需要参数“字符集2”；</li>
<li>字符集2：指定要转换成的目标字符集。</li>
</ul>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>将输入字符由大写转换为小写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;HELLO WORLD&quot; | tr &apos;A-Z&apos; &apos;a-z&apos;</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<p>‘A-Z’ 和 ‘a-z’都是集合，集合是可以自己制定的，例如：’ABD-}’、’bB.,’、’a-de-h’、’a-c0-9’都属于集合，集合里可以使用’\n’、’\t’，可以可以使用其他ASCII字符。</p>
<p>使用tr删除字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;hello 123 world 456&quot; | tr -d &apos;0-9&apos;</span><br><span class="line">hello  world</span><br></pre></td></tr></table></figure>
<p>将制表符转换为空格：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat text | tr &apos;\t&apos; &apos; &apos;</span><br></pre></td></tr></table></figure>
<p>字符集补集，从输入文本中将不在补集中的所有字符删除：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo aa.,a 1 b#$bb 2 c*/cc 3 ddd 4 | tr -d -c &apos;0-9 \n&apos;</span><br><span class="line"> 1  2  3  4</span><br></pre></td></tr></table></figure>
<p>此例中，补集中包含了数字0~9、空格和换行符\n，所以没有被删除，其他字符全部被删除了。</p>
<p>用tr压缩字符，可以压缩输入中重复的字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;thissss is      a text linnnnnnne.&quot; | tr -s &apos; sn&apos;</span><br><span class="line">this is a text line.</span><br></pre></td></tr></table></figure>
<p>巧妙使用tr做数字相加操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 1 2 3 4 5 6 7 8 9 | xargs -n1 | echo $[ $(tr &apos;\n&apos; &apos;+&apos;) 0 ]</span><br></pre></td></tr></table></figure>
<p>删除Windows文件“造成”的’^M’字符：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat file | tr -s &quot;\r&quot; &quot;\n&quot; &gt; new_file</span><br><span class="line">或</span><br><span class="line">cat file | tr -d &quot;\r&quot; &gt; new_file</span><br></pre></td></tr></table></figure>
<p> <strong>tr可以使用的字符类：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[:alnum:]：字母和数字</span><br><span class="line">[:alpha:]：字母</span><br><span class="line">[:cntrl:]：控制（非打印）字符</span><br><span class="line">[:digit:]：数字</span><br><span class="line">[:graph:]：图形字符</span><br><span class="line">[:lower:]：小写字母</span><br><span class="line">[:print:]：可打印字符</span><br><span class="line">[:punct:]：标点符号</span><br><span class="line">[:space:]：空白字符</span><br><span class="line">[:upper:]：大写字母</span><br><span class="line">[:xdigit:]：十六进制字符</span><br></pre></td></tr></table></figure>
<p>使用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr &apos;[:lower:]&apos; &apos;[:upper:]&apos;</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/tr/" data-id="cjw4xtiws00d8r4xi2tsauc6z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/tput" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/tput/" class="article-date">
  <time datetime="2019-05-15T13:24:15.343Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="tput"><a href="#tput" class="headerlink" title="tput"></a>tput</h1><p>通过terminfo数据库对终端会话进行初始化和操作</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>tput命令</strong> 将通过 terminfo 数据库对您的终端会话进行初始化和操作。通过使用 tput，您可以更改几项终端功能，如移动或更改光标、更改文本属性，以及清除终端屏幕的特定区域。</p>
<h3 id="什么是-terminfo-数据库？"><a href="#什么是-terminfo-数据库？" class="headerlink" title="什么是 terminfo 数据库？"></a>什么是 terminfo 数据库？</h3><p>UNIX 系统上的 terminfo 数据库用于定义终端和打印机的属性及功能，包括各设备（例如，终端和打印机）的行数和列数以及要发送至该设备的文本的属性。UNIX 中的几个常用程序都依赖 terminfo 数据库提供这些属性以及许多其他内容，其中包括 vi 和 emacs 编辑器以及 curses 和 man 程序。</p>
<p>与 UNIX 中的大多数命令一样，tput 命令既可以用在 shell 命令行中也可以用在 shell 脚本中。为让您更好地理解 tput，本文首先从命令行讲起，然后紧接着讲述 shell 脚本示例。</p>
<p> <strong>光标属性</strong> </p>
<p>在 UNIX shell 脚本中或在命令行中，移动光标或更改光标属性可能是非常有用的。有些情况下，您可能需要输入敏感信息（如密码），或在屏幕上两个不同的区域输入信息。在此类情况下，使用 tput 可能会对您有所帮助。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tput clear # 清屏</span><br><span class="line">tput sc # 保存当前光标位置</span><br><span class="line">tput cup 10 13 # 将光标移动到 row col</span><br><span class="line">tput civis # 光标不可见</span><br><span class="line">tput cnorm # 光标可见</span><br><span class="line">tput rc # 显示输出</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<p> <strong>移动光标</strong> </p>
<p>使用 tput 可以方便地实现在各设备上移动光标的位置。通过在 tput 中使用 cup 选项，或光标位置，您可以在设备的各行和各列中将光标移动到任意 X 或 Y 坐标。设备左上角的坐标为 (0,0)。</p>
<p>要在设备上将光标移动到第 5 列 (X) 的第 1 行 (Y)，只需执行 tput cup 5 1。另一个示例是 tput cup 23 45，此命令将使光标移动到第 23 列上的第 45 行。</p>
<p> <strong>移动光标并显示信息</strong> </p>
<p>另一种有用的光标定位技巧是移动光标，执行用于显示信息的命令，然后返回到前一光标位置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(tput sc ; tput cup 23 45 ; echo “Input from tput/echo at 23/45” ; tput rc)</span><br></pre></td></tr></table></figure>
<p>下面我们分析一下 subshell 命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tput sc</span><br></pre></td></tr></table></figure>
<p>必须首先保存当前的光标位置。要保存当前的光标位置，请包括 sc 选项或“save cursor position”。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tput cup 23 45</span><br></pre></td></tr></table></figure>
<p>在保存了光标位置后，光标坐标将移动到 (23,45)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo “Input from tput/echo at 23/45”</span><br></pre></td></tr></table></figure>
<p>将信息显示到 stdout 中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tput rc</span><br></pre></td></tr></table></figure>
<p>在显示了这些信息之后，光标必须返回到使用 tput sc 保存的原始位置。要使光标返回到其上次保存的位置，请包括 rc 选项或“restore cursor position”。</p>
<p>注意：由于本文首先详细介绍了通过命令行执行 tput，因此您可能会觉得在自己的 subshell 中执行命令要比单独执行每条命令然后在每条命令执行之前显示提示更简洁。</p>
<p> <strong>更改光标的属性</strong> </p>
<p>在向某一设备显示数据时，很多时候您并不希望看到光标。将光标转换为不可见可以使数据滚动时的屏幕看起来更整洁。要使光标不可见，请使用 civis 选项（例如，tput civis）。在数据完全显示之后，您可以使用 cnorm 选项将光标再次转变为可见。</p>
<p> <strong>文本属性</strong> </p>
<p>更改文本的显示方式可以让用户注意到菜单中的一组词或警惕用户注意某些重要的内容。您可以通过以下方式更改文本属性：使文本加粗、在文本下方添加下划线、更改背景颜色和前景颜色，以及逆转颜色方案等。</p>
<p>要更改文本的颜色，请使用 setb 选项（用于设置背景颜色）和 setf 选项（用于设置前景颜色）以及在 terminfo 数据库中分配的颜色数值。通常情况下，分配的数值与颜色的对应关系如下，但是可能会因 UNIX 系统的不同而异：</p>
<ul>
<li>0：黑色</li>
<li>1：蓝色</li>
<li>2：绿色</li>
<li>3：青色</li>
<li>4：红色</li>
<li>5：洋红色</li>
<li>6：黄色</li>
<li>7：白色</li>
</ul>
<p>执行以下示例命令可以将背景颜色更改为黄色，将前景颜色更改为红色：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tput setb 6 tput setf 4</span><br></pre></td></tr></table></figure>
<p>要反显当前的颜色方案，只需执行<code>tput rev</code>。</p>
<p>有时，仅为文本着色还不够，也就是说，您想要通过另一种方式引起用户的注意。可以通过两种方式达到这一目的：一是将文本设置为粗体，二是为文本添加下划线。</p>
<p>要将文本更改为粗体，请使用 bold 选项。要开始添加下划线，请使用 smul 选项。在完成显示带下划线的文本后，请使用 rmul 选项。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>使输出的字符串有颜色，底色，加粗：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">printf $(tput setaf 2; tput bold)&apos;color show\n\n&apos;$(tput sgr0)</span><br><span class="line"></span><br><span class="line">for((i=0; i&lt;=7; i++)); do</span><br><span class="line">    echo $(tput setaf $i)&quot;show me the money&quot;$(tput sgr0)</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">printf &apos;\n&apos;$(tput setaf 2; tput setab 0; tput bold)&apos;background color show&apos;$(tput sgr0)&apos;\n\n&apos;</span><br><span class="line"></span><br><span class="line">for((i=0,j=7; i&lt;=7; i++,j--)); do</span><br><span class="line">    echo $(tput setaf $i; tput setab $j; tput bold)&quot;show me the money&quot;$(tput sgr0)</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<p>输出格式控制函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># $1 str       print string</span><br><span class="line"># $2 color     0-7 设置颜色</span><br><span class="line"># $3 bgcolor   0-7 设置背景颜色</span><br><span class="line"># $4 bold      0-1 设置粗体</span><br><span class="line"># $5 underline 0-1 设置下划线</span><br><span class="line"></span><br><span class="line">function format_output()&#123;</span><br><span class="line">    str=$1</span><br><span class="line">    color=$2</span><br><span class="line">    bgcolor=$3</span><br><span class="line">    bold=$4</span><br><span class="line">    underline=$5</span><br><span class="line">    normal=$(tput sgr0)</span><br><span class="line"></span><br><span class="line">    case &quot;$color&quot; in</span><br><span class="line">        0|1|2|3|4|5|6|7)</span><br><span class="line">            setcolor=$(tput setaf $color;) ;;</span><br><span class="line">        *)</span><br><span class="line">            setcolor=&quot;&quot; ;;</span><br><span class="line">    esac</span><br><span class="line"></span><br><span class="line">    case &quot;$bgcolor&quot; in</span><br><span class="line">        0|1|2|3|4|5|6|7)</span><br><span class="line">            setbgcolor=$(tput setab $bgcolor;) ;;</span><br><span class="line">        *)</span><br><span class="line">            setbgcolor=&quot;&quot; ;;</span><br><span class="line">    esac</span><br><span class="line"></span><br><span class="line">    if [ &quot;$bold&quot; = &quot;1&quot; ]; then</span><br><span class="line">        setbold=$(tput bold;)</span><br><span class="line">    else</span><br><span class="line">        setbold=&quot;&quot;</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    if [ &quot;$underline&quot; = &quot;1&quot; ]; then</span><br><span class="line">        setunderline=$(tput smul;)</span><br><span class="line">    else</span><br><span class="line">        setunderline=&quot;&quot;</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    printf &quot;$setcolor$setbgcolor$setbold$setunderline$str$normal\n&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">format_output &quot;Yesterday Once more&quot; 2 5 1 1</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<p>光标属性例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># clear the screen</span><br><span class="line">tput clear</span><br><span class="line"># Move cursor to screen location X,Y (top left is 0,0)</span><br><span class="line">tput cup 3 15</span><br><span class="line"># set a foreground colour using ANSI escape</span><br><span class="line">tput setaf 3</span><br><span class="line">echo &quot;XYX Corp LTD.&quot;</span><br><span class="line">tput sgr0</span><br><span class="line">tput cup 5 17</span><br><span class="line"># Set reverse video mode</span><br><span class="line">tput rev</span><br><span class="line">echo &quot;M A I N - M E N U&quot;</span><br><span class="line">tput sgr0</span><br><span class="line">tput cup 7 15</span><br><span class="line">echo &quot;1\. User Management&quot;</span><br><span class="line">tput cup 8 15</span><br><span class="line">echo &quot;2\. service Management&quot;</span><br><span class="line">tput cup 9 15</span><br><span class="line">echo &quot;3\. Process Management&quot;</span><br><span class="line">tput cup 10 15</span><br><span class="line">echo &quot;4\. Backup&quot;</span><br><span class="line"># Set bold mode</span><br><span class="line">tput bold</span><br><span class="line">tput cup 12 15</span><br><span class="line">read -p &quot;Enter your choice [1-4] &quot; choice</span><br><span class="line">tput clear</span><br><span class="line">tput sgr0</span><br><span class="line">tput rc</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/tput/" data-id="cjw4xtiwt00dar4xias2gwmes" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/touch" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/touch/" class="article-date">
  <time datetime="2019-05-15T13:24:15.341Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h1><p>创建新的空文件</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>touch命令</strong> 有两个功能：一是用于把已存在文件的时间标签更新为系统当前的时间（默认方式），它们的数据将原封不动地保留下来；二是用来创建新的空文件。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-a：或--time=atime或--time=access或--time=use  只更改存取时间；</span><br><span class="line">-c：或--no-create  不建立任何文件；</span><br><span class="line">-d：&lt;时间日期&gt; 使用指定的日期时间，而非现在的时间；</span><br><span class="line">-f：此参数将忽略不予处理，仅负责解决BSD版本touch指令的兼容性问题；</span><br><span class="line">-m：或--time=mtime或--time=modify  只更该变动时间；</span><br><span class="line">-r：&lt;参考文件或目录&gt;  把指定文件或目录的日期时间，统统设成和参考文件或目录的日期时间相同；</span><br><span class="line">-t：&lt;日期时间&gt;  使用指定的日期时间，而非现在的时间；</span><br><span class="line">--help：在线帮助；</span><br><span class="line">--version：显示版本信息。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>文件：指定要设置时间属性的文件列表。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ex2</span><br></pre></td></tr></table></figure>
<p>在当前目录下建立一个空文件ex2，然后，利用<code>ls -l</code>命令可以发现文件ex2的大小为0，表示它是空文件。</p>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/touch/" data-id="cjw4xtiws00d7r4xiiaamycys" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/top" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/top/" class="article-date">
  <time datetime="2019-05-15T13:24:15.339Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="top"><a href="#top" class="headerlink" title="top"></a>top</h1><p>显示或管理执行中的程序</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>top命令</strong> 可以实时动态地查看系统的整体运行情况，是一个综合了多方信息监测系统性能和运行信息的实用工具。通过top命令所提供的互动式界面，用热键可以管理。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top(选项)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-b：以批处理模式操作；</span><br><span class="line">-c：显示完整的治命令；</span><br><span class="line">-d：屏幕刷新间隔时间；</span><br><span class="line">-I：忽略失效过程；</span><br><span class="line">-s：保密模式；</span><br><span class="line">-S：累积模式；</span><br><span class="line">-i&lt;时间&gt;：设置间隔时间；</span><br><span class="line">-u&lt;用户名&gt;：指定用户名；</span><br><span class="line">-p&lt;进程号&gt;：指定进程；</span><br><span class="line">-n&lt;次数&gt;：循环显示的次数。</span><br></pre></td></tr></table></figure>
<h3 id="top交互命令"><a href="#top交互命令" class="headerlink" title="top交互命令"></a>top交互命令</h3><p>在top命令执行过程中可以使用的一些交互命令。这些命令都是单字母的，如果在命令行中使用了-s选项， 其中一些命令可能会被屏蔽。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">h：显示帮助画面，给出一些简短的命令总结说明；</span><br><span class="line">k：终止一个进程；</span><br><span class="line">i：忽略闲置和僵死进程，这是一个开关式命令；</span><br><span class="line">q：退出程序；</span><br><span class="line">r：重新安排一个进程的优先级别；</span><br><span class="line">S：切换到累计模式；</span><br><span class="line">s：改变两次刷新之间的延迟时间（单位为s），如果有小数，就换算成ms。输入0值则系统将不断刷新，默认值是5s；</span><br><span class="line">f或者F：从当前显示中添加或者删除项目；</span><br><span class="line">o或者O：改变显示项目的顺序；</span><br><span class="line">l：切换显示平均负载和启动时间信息；</span><br><span class="line">m：切换显示内存信息；</span><br><span class="line">t：切换显示进程和CPU状态信息；</span><br><span class="line">c：切换显示命令名称和完整命令行；</span><br><span class="line">M：根据驻留内存大小进行排序；</span><br><span class="line">P：根据CPU使用百分比大小进行排序；</span><br><span class="line">T：根据时间/累计时间进行排序；</span><br><span class="line">w：将当前设置写入~/.toprc文件中。</span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">top - 09:44:56 up 16 days, 21:23,  1 user,  load average: 9.59, 4.75, 1.92</span><br><span class="line">Tasks: 145 total,   2 running, 143 sleeping,   0 stopped,   0 zombie</span><br><span class="line">Cpu(s): 99.8%us,  0.1%sy,  0.0%ni,  0.2%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st</span><br><span class="line">Mem:   4147888k total,  2493092k used,  1654796k free,   158188k buffers</span><br><span class="line">Swap:  5144568k total,       56k used,  5144512k free,  2013180k cached</span><br></pre></td></tr></table></figure>
<p> <strong>解释：</strong> </p>
<ul>
<li>top - 09:44:56[当前系统时间],</li>
<li>16 days[系统已经运行了16天],</li>
<li>1 user[个用户当前登录],</li>
<li>load average: 9.59, 4.75, 1.92[系统负载，即任务队列的平均长度]</li>
<li>Tasks: 145 total[总进程数],</li>
<li>2 running[正在运行的进程数],</li>
<li>143 sleeping[睡眠的进程数],</li>
<li>0 stopped[停止的进程数],</li>
<li>0 zombie[冻结进程数],</li>
<li>Cpu(s): 99.8%us[用户空间占用CPU百分比],</li>
<li>0.1%sy[内核空间占用CPU百分比],</li>
<li>0.0%ni[用户进程空间内改变过优先级的进程占用CPU百分比],</li>
<li>0.2%id[空闲CPU百分比], 0.0%wa[等待输入输出的CPU时间百分比],</li>
<li>0.0%hi[],</li>
<li>0.0%st[],</li>
<li>Mem: 4147888k total[物理内存总量],</li>
<li>2493092k used[使用的物理内存总量],</li>
<li>1654796k free[空闲内存总量],</li>
<li>158188k buffers[用作内核缓存的内存量]</li>
<li>Swap:  5144568k total[交换区总量],</li>
<li>56k used[使用的交换区总量],</li>
<li>5144512k free[空闲交换区总量],</li>
<li>2013180k cached[缓冲的交换区总量],</li>
</ul>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/top/" data-id="cjw4xtiwr00d6r4xi64ueqfo6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/tmux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/tmux/" class="article-date">
  <time datetime="2019-05-15T13:24:15.338Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h1><p>Tmux是一个优秀的终端复用软件，类似GNU Screen，但来自于OpenBSD，采用BSD授权。</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p>使用它最直观的好处就是，通过一个终端登录远程主机并运行tmux后，在其中可以开启多个控制台而无需再“浪费”多余的终端来连接这台远程主机；</p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul>
<li>提供了强劲的、易于使用的命令行界面。</li>
<li>可横向和纵向分割窗口。</li>
<li>窗格可以自由移动和调整大小，或直接利用四个预设布局之一。</li>
<li>支持 UTF-8 编码及 256 色终端。</li>
<li>可在多个缓冲区进行复制和粘贴。</li>
<li>可通过交互式菜单来选择窗口、会话及客户端。</li>
<li>支持跨窗口搜索。</li>
<li>支持自动及手动锁定窗口。</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 Mac OS 中，通过 brew 安装</span></span><br><span class="line">brew install tmux</span><br><span class="line"><span class="comment"># ubuntu版本下直接apt-get安装</span></span><br><span class="line">sudo apt-get install tmux</span><br><span class="line"><span class="comment"># centos7版本下直接yum安装</span></span><br><span class="line">yum install -y tmux</span><br><span class="line"></span><br><span class="line"><span class="comment"># centos6版本需要编译安装</span></span><br><span class="line">yum install libevent libevent-devel ncurses-devel</span><br><span class="line">tar -zvxf tmux-2.3.tar.gz <span class="comment"># (提前下载：wget https://github.com/tmux/tmux/releases/download/2.3/tmux-2.3.tar.gz)</span></span><br><span class="line"><span class="built_in">cd</span> tmux-2.3</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<h2 id="快捷键使用说明"><a href="#快捷键使用说明" class="headerlink" title="快捷键使用说明"></a>快捷键使用说明</h2><table class="table-view log-set-param"><br><tbody><br><tr><br><td colspan="2" align="left" valign="center" width="0"><br>  <div>Ctrl+b</div><br></td><br><td><br>  <div>激活控制台；此时以下按键生效</div><br></td><br></tr><br><tr><br><td rowspan="9" align="left" valign="center" width="0"><br>  <div>系统操作</div><br></td><br><td><br>  <div>?</div><br></td><br><td><br>  <div>列出所有快捷键；按q返回</div><br></td><br></tr><br><tr><br><td><br>  <div>d</div><br></td><br><td><br>  <div>脱离当前会话；这样可以暂时返回Shell界面，输入tmux attach能够重新进入之前的会话</div><br></td><br></tr><br><tr><br><td><br>  <div>D</div><br></td><br><td><br>  <div>选择要脱离的会话；在同时开启了多个会话时使用</div><br></td><br></tr><br><tr><br><td><br>  <div>Ctrl+z</div><br></td><br><td><br>  <div>挂起当前会话</div><br></td><br></tr><br><tr><br><td><br>  <div>r</div><br></td><br><td><br>  <div>强制重绘未脱离的会话</div><br></td><br></tr><br><tr><br><td><br>  <div>s</div><br></td><br><td><br>  <div>选择并切换会话；在同时开启了多个会话时使用</div><br></td><br></tr><br><tr><br><td><br>  <div>:</div><br></td><br><td><br>  <div>进入命令行模式；此时可以输入支持的命令，例如kill-server可以关闭服务器</div><br></td><br></tr><br><tr><br><td><br>  <div>[</div><br></td><br><td><br>  <div>进入复制模式；此时的操作与vi/emacs相同，按q/Esc退出</div><br></td><br></tr><br><tr><br><td><br>  <div>~</div><br></td><br><td><br>  <div>列出提示信息缓存；其中包含了之前tmux返回的各种提示信息</div><br></td><br></tr><br><tr><br><td rowspan="10" align="left" valign="center" width="0"><br>  <div>窗口操作</div><br></td><br><td><br>  <div>c</div><br></td><br><td><br>  <div>创建新窗口</div><br></td><br></tr><br><tr><br><td><br>  <div>&amp;</div><br></td><br><td><br>  <div>关闭当前窗口</div><br></td><br></tr><br><tr><br><td><br>  <div>数字键</div><br></td><br><td><br>  <div>切换至指定窗口</div><br></td><br></tr><br><tr><br><td><br>  <div>p</div><br></td><br><td><br>  <div>切换至上一窗口</div><br></td><br></tr><br><tr><br><td><br>  <div>n</div><br></td><br><td><br>  <div>切换至下一窗口</div><br></td><br></tr><br><tr><br><td><br>  <div>l</div><br></td><br><td><br>  <div>在前后两个窗口间互相切换</div><br></td><br></tr><br><tr><br><td><br>  <div>w</div><br></td><br><td><br>  <div>通过窗口列表切换窗口</div><br></td><br></tr><br><tr><br><td><br>  <div>,</div><br></td><br><td><br>  <div>重命名当前窗口；这样便于识别</div><br></td><br></tr><br><tr><br><td><br>  <div>.</div><br></td><br><td><br>  <div>修改当前窗口编号；相当于窗口重新排序</div><br></td><br></tr><br><tr><br><td><br>  <div>f</div><br></td><br><td><br>  <div>在所有窗口中查找指定文本</div><br></td><br></tr><br><tr><br><td rowspan="14" align="left" valign="center" width="0"><br>  <div>面板操作</div><br></td><br><td><br>  <div>”</div><br></td><br><td><br>  <div>将当前面板平分为上下两块</div><br></td><br></tr><br><tr><br><td><br>  <div>%</div><br></td><br><td><br>  <div>将当前面板平分为左右两块</div><br></td><br></tr><br><tr><br><td><br>  <div>x</div><br></td><br><td><br>  <div>关闭当前面板</div><br></td><br></tr><br><tr><br><td><br>  <div>!</div><br></td><br><td><br>  <div>将当前面板置于新窗口；即新建一个窗口，其中仅包含当前面板</div><br></td><br></tr><br><tr><br><td><br>  <div>Ctrl+方向键</div><br></td><br><td><br>  <div>以1个单元格为单位移动边缘以调整当前面板大小</div><br></td><br></tr><br><tr><br><td><br>  <div>Alt+方向键</div><br></td><br><td><br>  <div>以5个单元格为单位移动边缘以调整当前面板大小</div><br></td><br></tr><br><tr><br><td><br>  <div>Space</div><br></td><br><td><br>  <div>在预置的面板布局中循环切换；依次包括even-horizontal、even-vertical、main-horizontal、main-vertical、tiled</div><br></td><br></tr><br><tr><br><td><br>  <div>q</div><br></td><br><td><br>  <div>显示面板编号</div><br></td><br></tr><br><tr><br><td><br>  <div>o</div><br></td><br><td><br>  <div>在当前窗口中选择下一面板</div><br></td><br></tr><br><tr><br><td><br>  <div>方向键</div><br></td><br><td><br>  <div>移动光标以选择面板</div><br></td><br></tr><br><tr><br><td><br>  <div>{</div><br></td><br><td><br>  <div>向前置换当前面板</div><br></td><br></tr><br><tr><br><td><br>  <div>}</div><br></td><br><td><br>  <div>向后置换当前面板</div><br></td><br></tr><br><tr><br><td><br>  <div>Alt+o</div><br></td><br><td><br>  <div>逆时针旋转当前窗口的面板</div><br></td><br></tr><br><tr><br><td><br>  <div>Ctrl+o</div><br></td><br><td><br>  <div>顺时针旋转当前窗口的面板</div><br></td><br></tr><br></tbody><br></table>

<p>1）进入tmux面板后，一定要先按ctrl+b，然后松开，再按其他的组合键才生效。<br>2）常用到的几个组合键：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ctrl+b ?            显示快捷键帮助</span><br><span class="line">ctrl+b 空格键       采用下一个内置布局，这个很有意思，在多屏时，用这个就会将多有屏幕竖着展示</span><br><span class="line">ctrl+b !            把当前窗口变为新窗口</span><br><span class="line">ctrl+b  &quot;           模向分隔窗口</span><br><span class="line">ctrl+b %            纵向分隔窗口</span><br><span class="line">ctrl+b q            显示分隔窗口的编号</span><br><span class="line">ctrl+b o            跳到下一个分隔窗口。多屏之间的切换</span><br><span class="line">ctrl+b 上下键      上一个及下一个分隔窗口</span><br><span class="line">ctrl+b C-方向键    调整分隔窗口大小</span><br><span class="line">ctrl+b &amp;           确认后退出当前tmux</span><br><span class="line">ctrl+b [           复制模式，即将当前屏幕移到上一个的位置上，其他所有窗口都向前移动一个。</span><br><span class="line">ctrl+b c           创建新窗口</span><br><span class="line">ctrl+b n           选择下一个窗口</span><br><span class="line">ctrl+b l           最后使用的窗口</span><br><span class="line">ctrl+b p           选择前一个窗口</span><br><span class="line">ctrl+b w           以菜单方式显示及选择窗口</span><br><span class="line">ctrl+b s           以菜单方式显示和选择会话。这个常用到，可以选择进入哪个tmux</span><br><span class="line">ctrl+b t           显示时钟。然后按enter键后就会恢复到shell终端状态</span><br><span class="line">ctrl+b d           脱离当前会话；这样可以暂时返回Shell界面，输入tmux attach能够重新进入之前的会话</span><br></pre></td></tr></table></figure>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li>tmux 官网下载地址：<a href="http://tmux.github.io/" target="_blank" rel="noopener">http://tmux.github.io/</a> </li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/tmux/" data-id="cjw4xtiwv00dcr4xikrf95v31" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-linux_command/tload" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/15/linux_command/tload/" class="article-date">
  <time datetime="2019-05-15T13:24:15.336Z" itemprop="datePublished">2019-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="tload"><a href="#tload" class="headerlink" title="tload"></a>tload</h1><p>显示系统负载状况</p>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>tload命令</strong> 以图形化的方式输出当前系统的平均负载到指定的终端。假设不给予终端机编号，则会在执行tload指令的终端机显示负载情形。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tload(选项)(参数)</span><br></pre></td></tr></table></figure>
<h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-s：指定闲时的刻度；</span><br><span class="line">-d：指定间隔的时间（秒）。</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>终端：指定显示信息的终端设备文件。</p>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p>使用tload命令查看系统负载情况：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tload -d 1</span><br><span class="line">0.08, 0.02,0.01</span><br><span class="line">0.04, 0.01, 0.00</span><br><span class="line">0.04, 0.01, 0.00</span><br><span class="line">0.04, 0.01,0.00</span><br><span class="line">0.06, 0.02, 0.00</span><br></pre></td></tr></table></figure>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/05/15/linux_command/tload/" data-id="cjw4xtiwq00d4r4xi66i464uw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/7/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/57/">57</a><a class="extend next" rel="next" href="/page/9/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARTS/">ARTS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARTS/" style="font-size: 20px;">ARTS</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/05/25/ARTS第七周/">ARTS第七周</a>
          </li>
        
          <li>
            <a href="/2019/05/15/linux_command/znew/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/05/15/linux_command/zipsplit/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/05/15/linux_command/zipinfo/">(no title)</a>
          </li>
        
          <li>
            <a href="/2019/05/15/linux_command/zip/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>